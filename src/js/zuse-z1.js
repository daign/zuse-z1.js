var ZUSE=ZUSE||{};THREE.Path.prototype.moveBy=function(b,c){1===this.actions.length&&(this.actions[0].args[0]+=b,this.actions[0].args[1]+=c)};THREE.Path.prototype.lineBy=function(b,c){var d=this.actions[this.actions.length-1].args;this.lineTo(d[d.length-2]+b,d[d.length-1]+c)};THREE.Path.prototype.stepSize=0;THREE.Path.prototype.setStepSize=function(b){this.stepSize=Math.floor(Math.abs(b))};
THREE.Path.prototype.stepBy=function(b,c){if(0!=b&&0!=c)this.lineBy(b,c);else if(0!=b&&0==c)if(0==this.stepSize)this.lineBy(b,0);else{for(var d=Math.abs(b),e=b/d,f=Math.floor(d/this.stepSize),g=0;g<f;g++)this.lineBy(this.stepSize*e,0);d%=this.stepSize;0!=d&&this.lineBy(d*e,0)}else if(0==b&&0!=c)if(0==this.stepSize)this.lineBy(0,c);else{d=Math.abs(c);e=c/d;f=Math.floor(d/this.stepSize);for(g=0;g<f;g++)this.lineBy(0,this.stepSize*e);d%=this.stepSize;0!=d&&this.lineBy(0,d*e)}};
THREE.Path.prototype.quadraticCurveBy=function(b,c,d,e){var f=this.actions[this.actions.length-1].args,g=f[f.length-2],f=f[f.length-1],h=new THREE.QuadraticBezierCurve(new THREE.Vector2(g,f),new THREE.Vector2(b+g,c+f),new THREE.Vector2(d+g,e+f));this.curves.push(h);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:[b+g,c+f,d+g,e+f]})};
THREE.Path.prototype.arcBy=function(b,c){var d=this.actions[this.actions.length-1].args,e=d[d.length-2],d=d[d.length-1],f=Math.abs(b+c),g=(b+c)/f,h=e+b/2,i=d+c/2,f=-f/2,j=Math.PI*((0!==b?1:2)-g)/2,g=Math.PI*((0!==b?3:4)-g)/2,p=new THREE.ArcCurve(h,i,f,j,g,!0);this.curves.push(p);this.actions.push({action:THREE.PathActions.ARC,args:[h,i,f,j,g,!0,e+b,d+c]})};
THREE.Path.prototype.quarterArc=function(b){var c=this.actions[this.actions.length-1].args,d=c[c.length-2],c=c[c.length-1],e=d+b,f=-b,g=Math.PI/2,h=new THREE.ArcCurve(e,c,f,0,g,!0);this.curves.push(h);this.actions.push({action:THREE.PathActions.ARC,args:[e,c,f,0,g,!0,d+b,c-b]})};
THREE.Path.prototype.circle=function(b){if(1===this.actions.length){var c=this.actions[0].args[0],d=this.actions[0].args[1],e=2*Math.PI;this.actions[0].args[0]+=b;var f=new THREE.ArcCurve(c,d,b,0,e,!0);this.curves.push(f);this.actions.push({action:THREE.PathActions.ARC,args:[c,d,b,0,e,!0,c+b,d]})}};ZUSE.CameraOrbitControls=function(b,c){function d(b){b.preventDefault();var c=g.domElement;l===k.ROTATE?(i.set(b.clientX,b.clientY),j.subVectors(i,h),g.rotateLeft(2*Math.PI*j.x/c.clientWidth*g.rotateSpeed),g.rotateUp(2*Math.PI*j.y/c.clientHeight*g.rotateSpeed),h.copy(i)):l===k.DOLLY?(q.set(b.clientX,b.clientY),v.subVectors(q,u),0<v.y?g.dollyIn():g.dollyOut(),u.copy(q)):l===k.PAN&&(o.set(b.clientX,b.clientY),r.subVectors(o,p),g.pan(r.x,r.y),p.copy(o));g.update()}function e(){document.removeEventListener("mousemove",
d,!1);document.removeEventListener("mouseup",e,!1);g.dispatchEvent(z);l=k.NONE}function f(b){b.preventDefault();b.stopPropagation();var c=0;void 0!==b.wheelDelta?c=b.wheelDelta:void 0!==b.detail&&(c=-b.detail);0<c?g.dollyOut():g.dollyIn();g.update();g.dispatchEvent(A);g.dispatchEvent(z)}this.object=b;this.domElement=c;this.target=new THREE.Vector3;this.object.position.set(400,-400,400);this.object.up.set(0,0,1);this.target.set(140,120,160);this.rotateSpeed=this.zoomSpeed=1;this.minDistance=150;this.maxDistance=
1E3;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;var g=this,h=new THREE.Vector2,i=new THREE.Vector2,j=new THREE.Vector2,p=new THREE.Vector2,o=new THREE.Vector2,r=new THREE.Vector2,s=new THREE.Vector3,m=new THREE.Vector3,u=new THREE.Vector2,q=new THREE.Vector2,v=new THREE.Vector2,w=0,x=0,t=1,y=new THREE.Vector3,B=new THREE.Vector3,C=new THREE.Quaternion,k={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},l=k.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();
var D=(new THREE.Quaternion).setFromUnitVectors(b.up,new THREE.Vector3(0,1,0)),E=D.clone().inverse(),F={type:"change"},A={type:"start"},z={type:"end"};this.rotateLeft=function(b){void 0===b&&(b=getAutoRotationAngle());x-=b};this.rotateUp=function(b){void 0===b&&(b=getAutoRotationAngle());w-=b};this.panLeft=function(b){var c=this.object.matrix.elements;s.set(c[0],c[1],c[2]);s.multiplyScalar(-b);y.add(s)};this.panUp=function(b){var c=this.object.matrix.elements;s.set(c[4],c[5],c[6]);s.multiplyScalar(b);
y.add(s)};this.pan=function(b,c){var d=g.domElement,e=g.object.position.clone().sub(g.target).length(),e=e*Math.tan(g.object.fov/2*Math.PI/180);g.panLeft(2*b*e/d.clientHeight);g.panUp(2*c*e/d.clientHeight)};this.dollyIn=function(b){void 0===b&&(b=Math.pow(0.95,g.zoomSpeed));t/=b};this.dollyOut=function(b){void 0===b&&(b=Math.pow(0.95,g.zoomSpeed));t*=b};this.update=function(){var b=this.object.position;m.copy(b).sub(this.target);m.applyQuaternion(D);var c=Math.atan2(m.x,m.z),d=Math.atan2(Math.sqrt(m.x*
m.x+m.z*m.z),m.y),c=c+x,d=d+w,d=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,d)),d=Math.max(1E-6,Math.min(Math.PI-1E-6,d)),e=m.length()*t,e=Math.max(this.minDistance,Math.min(this.maxDistance,e));this.target.add(y);m.x=e*Math.sin(d)*Math.sin(c);m.y=e*Math.cos(d);m.z=e*Math.sin(d)*Math.cos(c);m.applyQuaternion(E);b.copy(this.target).add(m);this.object.lookAt(this.target);w=x=0;t=1;y.set(0,0,0);if(1E-6<B.distanceToSquared(this.object.position)||1E-6<8*(1-C.dot(this.object.quaternion)))this.dispatchEvent(F),
B.copy(this.object.position),C.copy(this.object.quaternion)};this.reset=function(){l=k.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.update()};this.domElement.addEventListener("mousedown",function(b){0===b.button&&!ZUSE.INTERSECTED&&(b.preventDefault(),b.shiftKey?(l=k.PAN,p.set(b.clientX,b.clientY)):(l=k.ROTATE,h.set(b.clientX,b.clientY)),document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",e,!1),g.dispatchEvent(A))},!1);this.domElement.addEventListener("mousewheel",
f,!1);this.domElement.addEventListener("DOMMouseScroll",f,!1);this.domElement.addEventListener("touchstart",function(b){switch(b.touches.length){case 1:l=k.TOUCH_ROTATE;h.set(b.touches[0].pageX,b.touches[0].pageY);break;case 2:l=k.TOUCH_DOLLY;var c=b.touches[0].pageX-b.touches[1].pageX,b=b.touches[0].pageY-b.touches[1].pageY,c=Math.sqrt(c*c+b*b);u.set(0,c);break;case 3:l=k.TOUCH_PAN;p.set(b.touches[0].pageX,b.touches[0].pageY);break;default:l=k.NONE}g.dispatchEvent(A)},!1);this.domElement.addEventListener("touchend",
function(){g.dispatchEvent(z);l=k.NONE},!1);this.domElement.addEventListener("touchmove",function(b){b.preventDefault();b.stopPropagation();var c=g.domElement;switch(b.touches.length){case 1:if(l!==k.TOUCH_ROTATE)break;i.set(b.touches[0].pageX,b.touches[0].pageY);j.subVectors(i,h);g.rotateLeft(2*Math.PI*j.x/c.clientWidth*g.rotateSpeed);g.rotateUp(2*Math.PI*j.y/c.clientHeight*g.rotateSpeed);h.copy(i);g.update();break;case 2:if(l!==k.TOUCH_DOLLY)break;c=b.touches[0].pageX-b.touches[1].pageX;b=b.touches[0].pageY-
b.touches[1].pageY;b=Math.sqrt(c*c+b*b);q.set(0,b);v.subVectors(q,u);0<v.y?g.dollyOut():g.dollyIn();u.copy(q);g.update();break;case 3:if(l!==k.TOUCH_PAN)break;o.set(b.touches[0].pageX,b.touches[0].pageY);r.subVectors(o,p);g.pan(r.x,r.y);p.copy(o);g.update();break;default:l=k.NONE}},!1);this.update()};ZUSE.CameraOrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);ZUSE.Shapes={paths:{},parsePath:function(b){var c={commands:[]};if("circle"===b.tagName){var d=parseInt(b.getAttribute("cx")),e=parseInt(b.getAttribute("cy")),b=parseInt(b.getAttribute("r"));c.stepSize=10;c.commands.push(["M",d,e]);c.commands.push(["c",b])}else{c.stepSize=parseInt(b.getAttribute("stepSize"));b=b.getAttribute("d").split(" ");for(e=0;e<b.length;e++)if(1===b[e].length)d=b[e];else{var f=b[e].split(",");switch(d){case "M":c.commands.push(["M",parseInt(f[0]),parseInt(f[1])]);break;case "l":c.commands.push(["l",
parseInt(f[0]),parseInt(f[1])]);break;case "a":var g=parseInt(f[5]),h=parseInt(f[6]);0===g||0===h?c.commands.push(["a",g,h]):c.commands.push(["b",g]);break;case "q":var g=parseInt(f[0]),h=parseInt(f[1]),i=parseInt(f[2]),f=parseInt(f[3]);c.commands.push(["q",g,h,i,f])}}}return c},addPath:function(b){for(var c=ZUSE.XMLUtils.loadXML("projects/adder/sheets/"+b+".svg"),d=c.documentElement.firstElementChild.nextElementSibling,e=1;e<d.childNodes.length;e+=2){var f="#"+d.childNodes[e].getAttribute("id");
void 0===this.paths[f]&&(this.paths[f]=this.parsePath(d.childNodes[e]))}e=c.documentElement.lastElementChild;c=this.parsePath(e.firstElementChild);d=e.lastElementChild;c.holes=[];for(e=1;e<d.childNodes.length;e+=2){var f=d.childNodes[e].href.baseVal,g=parseInt(d.childNodes[e].getAttribute("x")),h=parseInt(d.childNodes[e].getAttribute("y"));c.holes.push([f,g,h])}this.paths[b]=c},executeCommands:function(b,c){for(var d=0;d<c.length;d++)switch(c[d][0]){case "M":b.moveBy(c[d][1],c[d][2]);break;case "l":b.stepBy(c[d][1],
c[d][2]);break;case "a":b.arcBy(c[d][1],c[d][2]);break;case "b":b.quarterArc(c[d][1]);break;case "c":b.circle(c[d][1]);break;case "q":b.quadraticCurveBy(c[d][1],c[d][2],c[d][3],c[d][4])}},drawShape:function(b,c,d){var e=new THREE.Shape;e.moveTo(c,d);e.setStepSize(b.stepSize);this.executeCommands(e,b.commands);for(var f=0;f<b.holes.length;f++){var g=new THREE.Path;g.moveTo(c+b.holes[f][1],d+b.holes[f][2]);var h=this.paths[b.holes[f][0]];g.setStepSize(h.stepSize);this.executeCommands(g,h.commands);
e.holes.push(g)}return e},getShape:function(b,c,d){void 0===this.paths[b]&&this.addPath(b);return this.drawShape(this.paths[b],c,d)}};ZUSE.Transition=function(b,c,d,e){this.control=b;this.tact=c;this.changesTact=e;this.elements={active:[],inactive:[]};if(void 0!==d)for(b=0;b<d.length;b++)this.elements.active.push(d[b]);for(b=0;b<this.elements.active.length;b++)this.trigger(this.elements.active[b])};
ZUSE.Transition.prototype={constructor:ZUSE.Transition,initPulsers:function(){for(var b=this.control.adder.pulsers,c=1===this.tact||3===this.tact?"y":"x",d=0;d<b[c].length;d++){var e=b[c][d];this.elements.active.push(e);this.trigger(e)}},trigger:function(b){for(var b=ZUSE.TriggerRules.getTriggerResults(b,this.tact,!1),c=0;c<b.active.length;c++)if(-1===this.elements.active.indexOf(b.active[c])){this.elements.active.push(b.active[c]);var d=this.elements.inactive.indexOf(b.active[c]);-1!==d&&this.elements.inactive.splice(d,
1);this.trigger(b.active[c])}for(c=0;c<b.inactive.length;c++)-1===this.elements.active.indexOf(b.inactive[c])&&-1===this.elements.inactive.indexOf(b.inactive[c])&&(this.elements.inactive.push(b.inactive[c]),this.intrigger(b.inactive[c]))},intrigger:function(b){for(var b=ZUSE.TriggerRules.getTriggerResults(b,this.tact,!1),c=0;c<b.active.length;c++)-1===this.elements.active.indexOf(b.active[c])&&-1===this.elements.inactive.indexOf(b.active[c])&&(this.elements.inactive.push(b.active[c]),this.intrigger(b.active[c]));
for(c=0;c<b.inactive.length;c++)-1===this.elements.active.indexOf(b.inactive[c])&&-1===this.elements.inactive.indexOf(b.inactive[c])&&(this.elements.inactive.push(b.inactive[c]),this.intrigger(b.inactive[c]))},run:function(b){b&&this.changesTact&&ZUSE.gui.status.activate(this.tact-1);this.value=0;this.highlight(!0);b||this.changePositions();b=(new TWEEN.Tween(this)).to({value:10},1E3);b.onUpdate(function(){for(var b=0;b<this.elements.active.length;b++)this.elements.active[b].move(this.tact,this.value)});
b.onComplete(function(){this.highlight(!1);ZUSE.CycleAccess.release();this.changesTact&&ZUSE.gui.status.activate(this.tact%4)});b.easing(TWEEN.Easing.Quadratic.InOut);b.start()},set:function(){this.changePositions();for(var b=0;b<this.elements.active.length;b++)this.elements.active[b].move(this.tact,10)},runBackwards:function(){this.changesTact&&ZUSE.gui.status.activate(this.tact-1);this.value=10;this.highlight(!0);var b=(new TWEEN.Tween(this)).to({value:0},1E3);b.onUpdate(function(){for(var b=0;b<
this.elements.active.length;b++)this.elements.active[b].move(this.tact,this.value)});b.onComplete(function(){for(var b=0;b<this.elements.active.length;b++)this.elements.active[b].changePositionBack(this.tact);this.highlight(!1);ZUSE.CycleAccess.release()});b.easing(TWEEN.Easing.Quadratic.InOut);b.start()},highlight:function(b){for(var c=0;c<this.elements.active.length;c++)this.elements.active[c].setHighlight(b)},changePositions:function(){for(var b=0;b<this.elements.active.length;b++)this.elements.active[b].changePosition(this.tact);
for(b=0;b<this.elements.inactive.length;b++)this.elements.inactive[b].failedToChange(this.tact)}};ZUSE.TriggerRules={addTriggerRule:function(b,c,d){void 0===this[b[0]]&&(this[b[0]]={});void 0===this[b[0]][b[1]]&&(this[b[0]][b[1]]=[]);for(var e=0;e<d.length;e++)void 0===this[b[0]][b[1]][d[e]]&&(this[b[0]][b[1]][d[e]]=[]),this[b[0]][b[1]][d[e]].push(c)},getTriggerResults:function(b,c,d){var e={active:[],inactive:[]},c=this.getConditions(b,c);if(void 0!==c)for(var f=0;f<c.length;f++){var g=this.getElement(c[f]);void 0!==g?this.evaluatePosition(g.position,b.position,c[f][2])?(!d||c[f][3])&&-1===e.active.indexOf(g)&&
e.active.push(g):-1===e.inactive.indexOf(g)&&e.inactive.push(g):console.warn("Looking for undefined Element "+c[f][0]+":"+c[f][1]+".")}return e},getConditions:function(b,c){if(void 0!==this[b.name[0]]&&void 0!==this[b.name[0]][b.name[1]])return this[b.name[0]][b.name[1]][c]},getElement:function(b){var c=ZUSE.adderObj.layersByType[b[0]];if(void 0!==c)return c.namedElements[b[1]]},evaluatePosition:function(b,c,d){if(null!==d){for(var e=0;e<d.length;e++)if(0>d[e]){if(c===-1*d[e])return!0}else if(b===
d[e])return!0;return!1}return!0},parseXML:function(b){for(var b=b.getElementsByTagName("rule"),c=0;c<b.length;c++){for(var d=b[c].getAttribute("tact").split(","),e=0;e<d.length;e++)d[e]=parseInt(d[e]);var f="true"===b[c].getAttribute("continuous"),g=[],e=b[c].getElementsByTagName("source");if(0<e.length){var h=e[0].getAttribute("id").split("-"),i=e[0].getAttribute("condition");if(null!==i){i=i.split(",");for(e=0;e<i.length;e++)g.push(-1*parseInt(i[e]))}}e=b[c].getElementsByTagName("target");if(0<
e.length){var j=e[0].getAttribute("id").split("-"),i=e[0].getAttribute("condition");if(null!==i){i=i.split(",");for(e=0;e<i.length;e++)g.push(parseInt(i[e]))}}g=0<g.length?g:null;i=b[c].getAttribute("repeat");if(null!==i){i=i.split(",");for(e=0;e<i.length;e++){var p=[h[0],h[1]+i[e]],o=[j[0],j[1]+i[e]];o.push(g);o.push(f);this.addTriggerRule(p,o,d)}}else p=[h[0],h[1]+h[2]],o=[j[0],j[1]+j[2]],o.push(g),o.push(f),this.addTriggerRule(p,o,d)}}};ZUSE.CycleAccess={blocked:!1,exclusive:void 0,count:0,request:function(b){if(b)return this.blocked?!1:this.exclusive=this.blocked=!0;if(this.blocked)return!1===this.exclusive?(this.count++,!0):!1;this.blocked=!0;this.exclusive=!1;this.count++;return!0},ask:function(b){return this.blocked&&(b||!0===this.exclusive)},release:function(){if(this.exclusive||0>=--this.count)this.exclusive=void 0,this.blocked=!1}};ZUSE.CycleControl=function(b){this.adder=b;this.tact=0;this.history=[];this.nextInputs=[];this.preHighlighted=void 0;this.highlightMoving=!0};
ZUSE.CycleControl.prototype={constructor:ZUSE.CycleControl,switchHighlighting:function(){this.highlightMoving=!this.highlightMoving},preHighlightNext:function(){ZUSE.CycleAccess.ask(!0)||(this.preHighlighted=new ZUSE.Transition(this,this.tact%4+1,this.nextInputs,!0),this.preHighlighted.initPulsers(),this.preHighlighted.highlight(!0))},preHighlightBack:function(){!ZUSE.CycleAccess.ask(!0)&&1<=this.history.length&&(this.preHighlighted=this.history[this.history.length-1],this.preHighlighted.highlight(!0))},
preHighlightOff:function(){void 0!==this.preHighlighted&&this.preHighlighted.highlight(!1)},cycle:function(){if(ZUSE.CycleAccess.request(!0)){this.tact=this.tact%4+1;ZUSE.TempCalculator.cycle(this.tact);var b=new ZUSE.Transition(this,this.tact,this.nextInputs,!0);b.initPulsers();this.history.push(b);ZUSE.gui.toolbar.toolsByName.back.disable(!1);ZUSE.gui.toolbar.toolsByName.replay.disable(!1);this.nextInputs=[];b.run(!1);this.adder.layersByType.In.updateButtonState(this.tact)}},cycleBackwards:function(){if(1<=
this.history.length&&ZUSE.CycleAccess.request(!0)){ZUSE.TempCalculator.cycleBackwards(this.tact);var b=this.history.pop();this.nextInputs=[];b.runBackwards();b.changesTact&&(this.tact=(this.tact+2)%4+1);this.adder.layersByType.In.updateButtonState(this.tact);1>this.history.length&&(ZUSE.gui.toolbar.toolsByName.back.disable(!0),ZUSE.gui.toolbar.toolsByName.replay.disable(!0))}},repeatLast:function(){1<=this.history.length&&ZUSE.CycleAccess.request(!0)&&this.history[this.history.length-1].run(!0)},
switchInput:function(b,c){if(!ZUSE.CycleAccess.ask(!1))if(0===this.tact||4===this.tact)switch(b){case "A0":case "A1":case "A2":case "A3":ZUSE.CycleAccess.request(!1);var d=this.adder.layersByType.In.namedElements[b],e=0===d.position?2:4;c&&(c.target.value="0"===c.target.value?"1":"0");var f=0!==d.position;ZUSE.TempCalculator.values[b]=f;ZUSE.TempCalculator.updateValues();d=new ZUSE.Transition(this,e,[d],!1);this.history.push(d);d.run();return f;case "B0":case "B1":case "B2":case "B3":d=this.adder.layersByType.In.namedElements[b];
f=this.nextInputs.indexOf(d);if(-1===f)return this.nextInputs.push(d),ZUSE.inputs[b].setToOne(),ZUSE.TempCalculator.values[b]=!0,ZUSE.TempCalculator.updateValues(),!0;this.nextInputs.splice(f,1);ZUSE.inputs[b].setToZero();ZUSE.TempCalculator.values[b]=!1;ZUSE.TempCalculator.updateValues();return!1}else if(1===this.tact)switch(b){case "F0":d=this.adder.layersByType.In.namedElements[b],f=this.nextInputs.indexOf(d),-1===f?(this.nextInputs.push(d),c.target.value="1"):(this.nextInputs.splice(f,1),c.target.value=
"0")}}};ZUSE.Shader={vertexShader:"uniform  vec3 color;\nuniform float transparency;\nuniform float clippingX1;\nuniform float clippingX2;\nuniform float clippingY1;\nuniform float clippingY2;\nuniform float clippingTransparency;\nuniform float fadingWidth;\nvarying vec3 pixelCoordinates;\nvarying vec3 pixelNormal;\nvoid main() {\npixelCoordinates = position;\npixelNormal = normal;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n}",fragmentShader:"uniform  vec3 color;\nuniform float transparency;\nuniform float clippingX1;\nuniform float clippingX2;\nuniform float clippingY1;\nuniform float clippingY2;\nuniform float clippingTransparency;\nuniform float fadingWidth;\nvarying vec3 pixelCoordinates;\nvarying vec3 pixelNormal;\nvoid main( void ) {\nif ( transparency < 0.01 ) {\ndiscard;\n} else {\nfloat shade = (\t3.0 * pow ( abs ( pixelNormal.z ), 2.0 ) + \t\t\t\t\t\t\t\t\t2.0 * pow ( abs ( pixelNormal.y ), 2.0 ) + \t\t\t\t\t\t\t\t\t1.0 * pow ( abs ( pixelNormal.x ), 2.0 ) ) / 3.0;\nif ( clippingTransparency >= transparency ) {\ngl_FragColor = vec4( color * shade, transparency );\n} else if (    ( pixelCoordinates.x + 0.01 ) >= clippingX1 && \t\t\t\t\t\t\t\t( pixelCoordinates.x - 0.01 ) <= clippingX2 && \t\t\t\t\t\t\t\t( pixelCoordinates.y + 0.01 ) >= clippingY1 && \t\t\t\t\t\t\t\t( pixelCoordinates.y - 0.01 ) <= clippingY2 ) {\ngl_FragColor = vec4( color * shade, transparency );\n} else if ( fadingWidth < 0.01 ) {\nif ( clippingTransparency < 0.01 ) {\ndiscard;\n} else {\ngl_FragColor = vec4( color * shade, clippingTransparency );\n}\n} else {\nfloat fadingX = min( \t\t\t\t\t\tmax( 1.0 - ( clippingX1 - pixelCoordinates.x ) / fadingWidth, 0.0 ), \t\t\t\t\t\tmax( 1.0 - ( pixelCoordinates.x - clippingX2 ) / fadingWidth, 0.0 ) );\nfloat fadingY = min( \t\t\t\t\t\tmax( 1.0 - ( clippingY1 - pixelCoordinates.y ) / fadingWidth, 0.0 ), \t\t\t\t\t\tmax( 1.0 - ( pixelCoordinates.y - clippingY2 ) / fadingWidth, 0.0 ) );\nfloat fadingTransparency = min( fadingX, fadingY ) * \t\t\t\t\t\t\t\t\t\t\t\t( transparency - clippingTransparency ) + \t\t\t\t\t\t\t\t\t\t\t\tclippingTransparency;\nif ( fadingTransparency < 0.01 ) {\ndiscard;\n} else {\ngl_FragColor = vec4( color * shade, fadingTransparency );\n}\n}\n}\n}"};ZUSE.Colors={Highlight:new THREE.Color(16266768),NewBlue1:new THREE.Color(4038347),NewBlue2:new THREE.Color(3310505),NewBlue3:new THREE.Color(1269372),NewBlue4:new THREE.Color(10734816)};ZUSE.ShaderUniforms={x1:{type:"f",value:0},x2:{type:"f",value:0},y1:{type:"f",value:0},y2:{type:"f",value:0},clippingTransparency:{type:"f",value:0,active:!1,activeValue:0.4},fadingWidth:{type:"f",value:0,active:!1,activeValue:20},activateFadingWidth:function(b){this.activate(this.fadingWidth,b)},setFadingWidthValue:function(b){this.setValue(this.fadingWidth,b)},activateClippingTransparency:function(b){this.activate(this.clippingTransparency,b)},setClippingTransparencyValue:function(b){this.setValue(this.clippingTransparency,
b)},activate:function(b,c){b.active=c;b.value=c?b.activeValue:0},setValue:function(b,c){b.activeValue=c;b.active&&(b.value=c)}};ZUSE.Material=function(b,c){this.visible=!0;this.transparency=c;this.colorUniform={type:"c",value:b};this.transparencyUniform={type:"f",value:c};this.shader=new THREE.ShaderMaterial({uniforms:{color:this.colorUniform,transparency:this.transparencyUniform,clippingX1:ZUSE.ShaderUniforms.x1,clippingX2:ZUSE.ShaderUniforms.x2,clippingY1:ZUSE.ShaderUniforms.y1,clippingY2:ZUSE.ShaderUniforms.y2,clippingTransparency:ZUSE.ShaderUniforms.clippingTransparency,fadingWidth:ZUSE.ShaderUniforms.fadingWidth},vertexShader:ZUSE.Shader.vertexShader,
fragmentShader:ZUSE.Shader.fragmentShader,transparent:!0})};ZUSE.Material.prototype={constructor:ZUSE.Material,setTransparency:function(b){this.transparency=b;this.visible&&(this.transparencyUniform.value=b)},setVisibility:function(b){this.visible=b;this.transparencyUniform.value=b?this.transparency:0}};ZUSE.Materials={MovingSheet:new ZUSE.Material(ZUSE.Colors.NewBlue1,1),StaticSheet:new ZUSE.Material(ZUSE.Colors.NewBlue2,1),IntermediateSheet:new ZUSE.Material(ZUSE.Colors.NewBlue3,1),MovingPin:new ZUSE.Material(ZUSE.Colors.NewBlue4,1),StaticPin:new ZUSE.Material(ZUSE.Colors.NewBlue4,1),Highlight:new ZUSE.Material(ZUSE.Colors.Highlight,1),BoxBackFace:new THREE.MeshBasicMaterial({color:15654348,transparent:!0}),BoxWireframe:new THREE.LineBasicMaterial({color:0,linewidth:2}),BoxWireActive:new THREE.LineBasicMaterial({color:16266768,
linewidth:4})};ZUSE.Element=function(b,c,d){this.name=b;this.position=0;this.mesh=new THREE.Object3D;this.objects=[];this.parseObjects(c,d)};
ZUSE.Element.prototype={constructor:ZUSE.Element,parseObjects:function(b,c){for(var d=b.getElementsByTagName("obj3d"),e=0;e<d.length;e++){var f=new (ZUSE.WebGL[d[e].getAttribute("type")])(d[e],c);this.objects.push(f);this.mesh.add(f.mesh);this.selectable=f.mesh}d=b.getElementsByTagName("svg");for(e=0;e<d.length;e++)f=new (ZUSE.SVG[d[e].getAttribute("type")])(d[e]),this.objects.push(f)},distribute:function(b,c){for(var d=0;d<this.objects.length;d++)this.objects[d][b]&&this.objects[d][b].apply(this.objects[d],
c)},setHeight:function(b){this.distribute("setHeight",[b])},setHighlight:function(b){this.distribute("setHighlight",[b])},move:function(b,c){this.distribute("move",[b,c])},failedToChange:function(){this.distribute("failedToChange",[this.position])},changePosition:function(b){var c=this.position+1;c===b?this.position=c%4:c%4+1===b?this.position=(c+2)%4:console.warn("Unable to change position of "+this.name+".");this.distribute("setPosition",[this.position])},changePositionBack:function(b){var c=this.position;
c===b%4?this.position=(c+3)%4:c===(b+1)%4?this.position=(c+1)%4:console.warn("Unable to change position of "+this.name+".")},provideMeshTo:function(b){b.push(this.selectable)}};ZUSE.PlaneGeometry=function(b,c,d,e){THREE.Geometry.call(this);this.vertices.push(b,c,d,e);this.faces.push(new THREE.Face3(0,1,2));this.faces.push(new THREE.Face3(0,2,3));this.computeFaceNormals();this.computeVertexNormals()};ZUSE.PlaneGeometry.prototype=new THREE.Geometry;ZUSE.PlaneGeometry.prototype.constructor=ZUSE.PlaneGeometry;ZUSE.Axis=function(b,c){this.a=b;this.d=c;this.toString=function(){return this.a+this.d}};ZUSE.Selection=function(b,c){this.parent=c;this.limits=b;this.limits.z1=-10;this.limits.z2=this.getHeight()+10;this.initShaderUniforms();this.oldValue=0;this.values={x1:this.limits.x1,x2:this.limits.x2,y1:this.limits.y1,y2:this.limits.y2,z1:this.limits.z1,z2:this.limits.z2};this.visibleLayers={z1:0,z2:8};this.vertices=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.updateVertices();this.faces=[];
this.touchMeshes=new THREE.Object3D;this.displayMeshes=new THREE.Object3D;this.meshGeometries=[];this.lineGeometries=[];this.addFace({a:"y",d:1},0,1,5,4);this.addFace({a:"z",d:1},0,2,3,1);this.addFace({a:"x",d:1},0,4,6,2);this.addFace({a:"x",d:2},7,5,1,3);this.addFace({a:"y",d:2},7,3,2,6);this.addFace({a:"z",d:2},7,6,4,5);this.addLine(0,1,0,1);this.addLine(0,2,1,2);this.addLine(0,4,0,2);this.addLine(1,3,1,3);this.addLine(1,5,0,3);this.addLine(2,3,1,4);this.addLine(2,6,2,4);this.addLine(3,7,3,4);this.addLine(4,
5,0,5);this.addLine(4,6,2,5);this.addLine(5,7,3,5);this.addLine(6,7,4,5);this.enabled=!1;this.setActivation(!1)};
ZUSE.Selection.prototype={constructor:ZUSE.Selection,initShaderUniforms:function(){ZUSE.ShaderUniforms.x1.value=this.limits.x1;ZUSE.ShaderUniforms.x2.value=this.limits.x2;ZUSE.ShaderUniforms.y1.value=this.limits.y1;ZUSE.ShaderUniforms.y2.value=this.limits.y2},addFace:function(b,c,d,e,f){this.faces.push(new ZUSE.SelectionBoxFace(b,this.vertices[c],this.vertices[d],this.vertices[e],this.vertices[f],this))},addLine:function(b,c,d,e){new ZUSE.SelectionBoxLine(this.vertices[b],this.vertices[c],this.faces[d],
this.faces[e],this)},setBoxValue:function(b,c){this.values[b]=c;this.updateVertices();this.updateGeometries()},setDisplayValue:function(b,c){switch(b.a){case "x":case "y":ZUSE.ShaderUniforms[b].value=c;break;case "z":this.setVisibleLayers(b,c,!1);break;default:console.warn("axis "+b.a+" invalid")}},setDisplayValuesAnimated:function(b){this.time=0;var c=ZUSE.ShaderUniforms.x1.value,d=ZUSE.ShaderUniforms.x2.value,e=ZUSE.ShaderUniforms.y1.value,f=ZUSE.ShaderUniforms.y2.value,g=(new TWEEN.Tween(this)).to({time:1},
1E3);g.onUpdate(function(){ZUSE.ShaderUniforms.x1.value=c+this.time*(b.x1-c);ZUSE.ShaderUniforms.x2.value=d+this.time*(b.x2-d);ZUSE.ShaderUniforms.y1.value=e+this.time*(b.y1-e);ZUSE.ShaderUniforms.y2.value=f+this.time*(b.y2-f)});g.onComplete(function(){this.setVisibleLayers(new ZUSE.Axis("z",1),b.z1,!1);this.setVisibleLayers(new ZUSE.Axis("z",2),b.z2,!1)});g.easing(TWEEN.Easing.Quadratic.InOut);g.start();this.setVisibleLayers(new ZUSE.Axis("z",1),b.z1,!0);this.setVisibleLayers(new ZUSE.Axis("z",2),
b.z2,!0)},setVisibleLayers:function(b,c,d){if(this.visibleLayers[b]!==c&&(!d||!(1===b.d&&c>this.visibleLayers[b]||2===b.d&&c<this.visibleLayers[b]))){this.visibleLayers[b]=c;for(b=0;b<this.parent.layers.length;b++)this.parent.layers[b].setVisibility(b>=this.visibleLayers.z1&&b<=this.visibleLayers.z2)}},conformRange:function(b,c){var d="z"===b.a?40:20;switch(b.d){case 1:c=Math.max(c,this.limits[b]);c=Math.min(c,this.values[b.a+2]-d);break;case 2:c=Math.max(c,this.values[b.a+1]+d);c=Math.min(c,this.limits[b]);
break;default:console.warn("axis direction "+b.d+" invalid")}return c},conformLayerRange:function(b,c){if("z"===b.a)switch(b.d){case 1:c=Math.max(c,0);c=Math.min(c,this.visibleLayers.z2);break;case 2:c=Math.max(c,this.visibleLayers.z1);c=Math.min(c,8);break;default:console.warn("axis direction "+b.d+" invalid")}else c=this.conformRange(b,c);return c},computeLayerFromBox:function(b,c){if("z"===b.a){for(var d=0,e=0,f=0;f<this.parent.layers.length;f++)1===b.d&&c>d&&(e=f+1),d+=this.parent.layers[f].getHeight(),
2===b.d&&c>=d&&(e=f);c=e}return c},computeBoxFromLayer:function(b,c){"z"===b.a&&(n=c,c=this.parent.layers[n].meshes.position.z,c+=2===b.d?this.parent.layers[n].getHeight():0);return c},updateVertices:function(){this.vertices[0].set(this.values.x1,this.values.y1,this.values.z1);this.vertices[1].set(this.values.x2,this.values.y1,this.values.z1);this.vertices[2].set(this.values.x1,this.values.y2,this.values.z1);this.vertices[3].set(this.values.x2,this.values.y2,this.values.z1);this.vertices[4].set(this.values.x1,
this.values.y1,this.values.z2);this.vertices[5].set(this.values.x2,this.values.y1,this.values.z2);this.vertices[6].set(this.values.x1,this.values.y2,this.values.z2);this.vertices[7].set(this.values.x2,this.values.y2,this.values.z2)},updateGeometries:function(){for(var b=0;b<this.meshGeometries.length;b++)this.meshGeometries[b].verticesNeedUpdate=!0;for(b=0;b<this.lineGeometries.length;b++)this.lineGeometries[b].verticesNeedUpdate=!0},getHeight:function(){var b=this.parent.layers[this.parent.layers.length-
1];return b.meshes.position.z+b.getHeight()},updateHeightLimit:function(){this.limits.z2=this.getHeight()+10},updateBoxHeight:function(){var b={a:"z",d:1,toString:function(){return this.a+this.d}},c={a:"z",d:2,toString:function(){return this.a+this.d}},d=this.computeBoxFromLayer(b,this.visibleLayers.z1),e=this.computeBoxFromLayer(c,this.visibleLayers.z2);this.setBoxValue(b,d);this.setBoxValue(c,e)},dragStart:function(b){this.oldValue=this.values[b]},setFromMouse:function(b,c,d){c+=d?this.oldValue:
0;c=this.conformRange(b,c);this.setBoxValue(b,c);c=this.computeLayerFromBox(b,c);c=this.conformLayerRange(b,c);this.setDisplayValue(b,c);this.setSlider(b,c)},setFromSlider:function(b,c,d){this.setOneFromSlider(new ZUSE.Axis(b,1),this.transformValueFromSlider(b,c),!1);this.setOneFromSlider(new ZUSE.Axis(b,2),this.transformValueFromSlider(b,d),!1)},setOneFromSlider:function(b,c,d){c=this.conformLayerRange(b,c);this.setDisplayValue(b,c);d&&this.setSlider(b,c);c=this.computeBoxFromLayer(b,c);c=this.conformRange(b,
c);this.setBoxValue(b,c)},setFromCircuit:function(b){this.setDisplayValuesAnimated(b);this.setOneFromCircuit(new ZUSE.Axis("x",1),b.x1,!0);this.setOneFromCircuit(new ZUSE.Axis("x",2),b.x2,!0);this.setOneFromCircuit(new ZUSE.Axis("y",1),b.y1,!0);this.setOneFromCircuit(new ZUSE.Axis("y",2),b.y2,!0);this.setOneFromCircuit(new ZUSE.Axis("z",1),b.z1,!0);this.setOneFromCircuit(new ZUSE.Axis("z",2),b.z2,!0)},setOneFromCircuit:function(b,c,d){d&&this.setSlider(b,c);c=this.computeBoxFromLayer(b,c);this.setBoxValue(b,
c)},setSlider:function(b,c){var d={x:0,y:1,z:2}[b.a],c=this.transformValueToSlider(b.a,c),d=ZUSE.gui.toolbar.toolsByName.clipChange.sliders[d];d.values[b.d-1]=Math.round(c);d.updateSlider()},transformValueFromSlider:function(b,c){"z"!==b&&(c=c/1E3*(this.limits[b+2]-this.limits[b+1])+this.limits[b+1]);return c},transformValueToSlider:function(b,c){"z"!==b&&(c=1E3*((c-this.limits[b+1])/(this.limits[b+2]-this.limits[b+1])));return c},reset:function(){this.setFromCircuit({x1:this.limits.x1,x2:this.limits.x2,
y1:this.limits.y1,y2:this.limits.y2,z1:0,z2:8});ZUSE.SVGUtils.reset()},setActivation:function(b){this.enabled=b;for(var c=0;c<this.displayMeshes.children.length;c++)this.displayMeshes.children[c].visible=b,2<=this.displayMeshes.children[c].children.length&&(this.displayMeshes.children[c].children[0].visible=b,this.displayMeshes.children[c].children[1].visible=b);b||(document.body.style.cursor="auto")}};ZUSE.SelectionBoxLine=function(b,c,d,e,f){var g=new THREE.Geometry;g.vertices.push(b,c);g.computeLineDistances();g.dynamic=!0;f.lineGeometries.push(g);this.line=new THREE.Line(g,ZUSE.Materials.BoxWireframe,THREE.LinePieces);f.displayMeshes.add(this.line);d.lines.push(this);e.lines.push(this)};ZUSE.SelectionBoxLine.prototype={constructor:ZUSE.SelectionBoxLine,setHighlight:function(b){this.line.material=b?ZUSE.Materials.BoxWireActive:ZUSE.Materials.BoxWireframe}};ZUSE.SelectionBoxFace=function(b,c,d,e,f,g){b.toString=function(){return this.a+this.d};var h=new ZUSE.PlaneGeometry(c,d,e,f);h.dynamic=!0;g.meshGeometries.push(h);h=new THREE.Mesh(h);h.axis=b;h.visible=!1;h.guardian=this;g.touchMeshes.add(h);g.parent.selectables.push(h);b=new ZUSE.PlaneGeometry(f,e,d,c);b.dynamic=!0;g.meshGeometries.push(b);b=new THREE.Mesh(b,ZUSE.Materials.BoxBackFace);g.displayMeshes.add(b);this.lines=[]};
ZUSE.SelectionBoxFace.prototype={constructor:ZUSE.SelectionBoxFace,rayOver:function(){this.highlightLines(!0)},rayOut:function(){this.highlightLines(!1)},highlightLines:function(b){for(var c=0;c<this.lines.length;c++)this.lines[c].setHighlight(b)}};ZUSE.InputElement=function(b,c,d){this.name=b;this.values=c;this.activeTact=d;this.position=0};
ZUSE.InputElement.prototype={constructor:ZUSE.InputElement,move:function(){},setHighlight:function(){},failedToChange:function(){},changePosition:function(b){var c=this.position+1;c===b?this.position=c%4:c%4+1===b?this.position=(c+2)%4:console.warn("Unable to change position of "+this.name+".");this.setButtonValue(!1)},changePositionBack:function(b){var c=this.position;c===b%4?this.position=(c+3)%4:c===(b+1)%4?this.position=(c+1)%4:console.warn("Unable to change position of "+this.name+".");this.setButtonValue(!0)},
updateButtonState:function(b){ZUSE.inputs[this.name[1]]&&ZUSE.inputs[this.name[1]].setInput(!this.evaluateState(b))},evaluateState:function(b){return null!==this.activeTact?b===this.activeTact?!1:!0:!0},setButtonValue:function(b){var c=this.values[this.position];b&&ZUSE.inputs[this.name[1]]&&(b="1"===c,ZUSE.inputs[this.name[1]].setValue(b),ZUSE.TempCalculator.values[this.name[1]]=b,ZUSE.TempCalculator.updateValues())}};ZUSE.InputControlLayer=function(){this.namedElements={};this.addInput(["In","A0"],["1","?","?","0"],4);this.addInput(["In","A1"],["1","?","?","0"],4);this.addInput(["In","A2"],["1","?","?","0"],4);this.addInput(["In","A3"],["1","?","?","0"],4);this.addInput(["In","B0"],["0","1","?","?"],4);this.addInput(["In","B1"],["0","1","?","?"],4);this.addInput(["In","B2"],["0","1","?","?"],4);this.addInput(["In","B3"],["0","1","?","?"],4);this.addInput(["In","F0"],["0","?","?","1"],1);this.addInput(["In","K0"],
["1","0","?","?"],null);this.addInput(["In","K1"],["1","0","?","?"],null);this.addInput(["In","K2"],["1","0","?","?"],null);this.addInput(["In","K3"],["1","0","?","?"],null);this.addInput(["In","F4"],["0","?","?","1"],null)};ZUSE.InputControlLayer.prototype={constructor:ZUSE.InputControlLayer,addInput:function(b,c,d){this.namedElements[b[1]]=new ZUSE.InputElement(b,c,d)},updateButtonState:function(b){for(a in this.namedElements)this.namedElements[a].updateButtonState(b)}};ZUSE.Layer=function(b,c,d,e){this.parent=e;this.type=b.getAttribute("id");this.levels=b.getAttribute("levels");this.spacing=b.getAttribute("spacing")||d;this.intermediate="true"===b.getAttribute("intermediate");this.open=!1;this.namedElements={};this.unnamedElements=[];this.meshes=new THREE.Object3D;this.parseElements(b);this.parseElements(c)};
ZUSE.Layer.prototype={constructor:ZUSE.Layer,parseElements:function(b){for(var b=b.getElementsByTagName("elem"),c=0;c<b.length;c++){var d=b[c],e=d.getAttribute("id"),f=d.getAttribute("pulser");this.addElement(e,f,d)}},addElement:function(b,c,d){d=new ZUSE.Element([this.type,b],d,{spacing:this.spacing,intermediate:this.intermediate,levels:this.levels});this.meshes.add(d.mesh);null!==b?this.namedElements[b]=d:this.unnamedElements.push(d);null!==c&&this.parent.pulsers[c].push(d);d.provideMeshTo(this.parent.selectables2)},
changeSpacing:function(){for(var b in this.namedElements)this.namedElements[b].setHeight(this.spacing);for(b=0;b<this.unnamedElements.length;b++)this.unnamedElements[b].setHeight(this.spacing)},getHeight:function(){return 2*this.levels*this.spacing},setVisibility:function(b){for(var c=0;c<this.meshes.children.length;c++)this.meshes.children[c].children[0].visible=b}};ZUSE.Adder=function(b){this.meshes=new THREE.Object3D;this.layers=[];this.getLayerNumber={};this.layersByType={};this.pulsers={x:[],y:[]};this.spacingClosed=3;this.spacingOpen=20;this.selectables=[];this.selectables2=[];this.selectables2enabled=!1;this.cycleControl=new ZUSE.CycleControl(this);this.parseXML(b);this.layersByType.In=new ZUSE.InputControlLayer;this.selection=new ZUSE.Selection({x1:-40,x2:320,y1:-15,y2:265},this);this.meshes.add(this.selection.touchMeshes);this.meshes.add(this.selection.displayMeshes);
ZUSE.gui.webgl.scene.add(this.meshes)};
ZUSE.Adder.prototype={constructor:ZUSE.Adder,parseXML:function(b){for(var c=void 0,d=0;d<b.childNodes.length;d++){var e=b.childNodes[d];"layer"===e.nodeName?this.addLayer(e,c):"default"===e.nodeName&&(c=e)}},addLayer:function(b,c){var d=new ZUSE.Layer(b,c,this.spacingClosed,this);this.meshes.add(d.meshes);this.layers.push(d);this.getLayerNumber[d.type]=this.layers.length-1;this.layersByType[d.type]=d;this.setHeight(this.layers.length-1)},setHeight:function(b){0<b&&(this.layers[b].meshes.position.z=
this.layers[b-1].meshes.position.z+this.layers[b-1].getHeight())},changeSpacing:function(b){if(!this.layers[b].intermediate){var c=this.layers[b].open?this.spacingClosed:this.spacingOpen;this.layers[b].open=!this.layers[b].open;c=(new TWEEN.Tween(this.layers[b])).to({spacing:c},1E3);c.onUpdate(function(){this.changeSpacing();for(var c=b+1;c<this.parent.layers.length;c++)this.parent.setHeight(c);this.parent.selection.updateBoxHeight();this.parent.selection.updateHeightLimit()});c.easing(TWEEN.Easing.Quadratic.InOut);
c.start()}},switchSelectables2:function(){this.selectables2enabled=!this.selectables2enabled},highlightPart:function(b,c,d){c=ZUSE.TriggerRules.getTriggerResults({name:b},c,!0);c.active.push(ZUSE.TriggerRules.getElement(b));for(b=0;b<c.active.length;b++)c.active[b].setHighlight(d)}};ZUSE.SVGUtils={gates:{svgGateD3:{active:!1,x1:74,x2:106,y1:125,y2:225,z1:7,z2:7},svgGateD2:{active:!1,x1:114,x2:146,y1:125,y2:225,z1:7,z2:7},svgGateD1:{active:!1,x1:154,x2:186,y1:125,y2:225,z1:7,z2:7},svgGateD0:{active:!1,x1:194,x2:226,y1:125,y2:225,z1:7,z2:7},svgGateC3:{active:!1,x1:71,x2:110,y1:110,y2:255,z1:5,z2:5},svgGateC2:{active:!1,x1:111,x2:150,y1:110,y2:255,z1:5,z2:5},svgGateC1:{active:!1,x1:151,x2:190,y1:110,y2:255,z1:5,z2:5},svgGateC0:{active:!1,x1:191,x2:230,y1:110,y2:255,z1:5,z2:5},svgGateF4:{active:!1,
x1:26,x2:60,y1:60,y2:90,z1:5,z2:7},svgGateF3:{active:!1,x1:66,x2:100,y1:60,y2:90,z1:5,z2:7},svgGateF2:{active:!1,x1:106,x2:140,y1:60,y2:90,z1:5,z2:7},svgGateF1:{active:!1,x1:146,x2:180,y1:60,y2:90,z1:5,z2:7},svgGateH3:{active:!1,x1:74,x2:106,y1:70,y2:110,z1:5,z2:5},svgGateH2:{active:!1,x1:114,x2:146,y1:70,y2:110,z1:5,z2:5},svgGateH1:{active:!1,x1:154,x2:186,y1:70,y2:110,z1:5,z2:5},svgGateH0:{active:!1,x1:194,x2:226,y1:70,y2:110,z1:5,z2:5},svgGateN3:{active:!1,x1:64,x2:106,y1:5,y2:45,z1:5,z2:5},svgGateN2:{active:!1,
x1:106,x2:146,y1:5,y2:45,z1:5,z2:5},svgGateN1:{active:!1,x1:146,x2:186,y1:5,y2:45,z1:5,z2:5},svgGateN0:{active:!1,x1:186,x2:226,y1:5,y2:45,z1:5,z2:5},svgGateJ3:{active:!1,x1:60,x2:95,y1:45,y2:60,z1:5,z2:7},svgGateJ2:{active:!1,x1:100,x2:135,y1:45,y2:60,z1:5,z2:7},svgGateJ1:{active:!1,x1:140,x2:175,y1:45,y2:60,z1:5,z2:7},svgGateJ0:{active:!1,x1:180,x2:215,y1:45,y2:60,z1:5,z2:7},svgGateK3:{active:!1,x1:35,x2:120,y1:10,y2:115,z1:1,z2:1},svgGateK2:{active:!1,x1:75,x2:160,y1:10,y2:115,z1:3,z2:3},svgGateK1:{active:!1,
x1:115,x2:200,y1:10,y2:115,z1:1,z2:1},svgGateK0:{active:!1,x1:155,x2:240,y1:10,y2:115,z1:3,z2:3}},reset:function(){for(var b in this.gates){this.gates[b].active=!1;var c=document.getElementById(b);null!==c?c.setAttribute("fill","white"):console.warn("undefined element in SVGUtils.gates")}},onclick:function(b){this.reset();this.gates[b.id].active=!0;b.setAttribute("fill","#59b1d4");ZUSE.adderObj.selection.setFromCircuit(this.gates[b.id])},mouseover:function(b){document.body.style.cursor="pointer";
b.setAttribute("fill",this.gates[b.id].active?"#59b1d4":"#b0d9e8")},mouseout:function(b){document.body.style.cursor="auto";b.setAttribute("fill",this.gates[b.id].active?"#59b1d4":"white")}};ZUSE.XMLUtils={loadXML:function(b){var c=new XMLHttpRequest;c.open("GET",b,!1);c.setRequestHeader("Content-Type","text/xml");c.send("");return c.responseXML}};ZUSE.InitObj=function(b){ZUSE.adderObj=new ZUSE.Adder(b);b=[];b.push(ZUSE.adderObj.layersByType.In.namedElements.A0);b.push(ZUSE.adderObj.layersByType.In.namedElements.A1);b.push(ZUSE.adderObj.layersByType.In.namedElements.A2);b.push(ZUSE.adderObj.layersByType.In.namedElements.A3);b.push(ZUSE.adderObj.layersByType.C.namedElements.T);b.push(ZUSE.adderObj.layersByType.D.namedElements.T);(new ZUSE.Transition(ZUSE.adderObj.cycleControl,2,b,!1)).set()};ZUSE.InitPicking=function(){ZUSE.INTERSECTED=void 0;ZUSE.SELECTED=void 0;ZUSE.mouse=new THREE.Vector2;ZUSE.offset=new THREE.Vector3;ZUSE.plane=new THREE.Mesh(new THREE.PlaneGeometry(2E3,2E3,8,8),new THREE.MeshBasicMaterial({color:0,opacity:0.25,transparent:!0,wireframe:!0}));ZUSE.plane.visible=!1;ZUSE.gui.webgl.scene.add(ZUSE.plane);ZUSE.projector=new THREE.Projector;ZUSE.gui.webgl.renderer.domElement.addEventListener("mousemove",function(b){var c=ZUSE.adderObj.selection.enabled;if(c||ZUSE.adderObj.selectables2enabled){b.preventDefault();
var d=ZUSE.gui.confinedSum();ZUSE.mouse.x=2*((b.clientX-d)/(window.innerWidth-d))-1;ZUSE.mouse.y=2*-(b.clientY/window.innerHeight)+1;b=new THREE.Vector3(ZUSE.mouse.x,ZUSE.mouse.y,0.5);ZUSE.projector.unprojectVector(b,ZUSE.gui.webgl.camera);b=new THREE.Raycaster(ZUSE.gui.webgl.camera.position,b.sub(ZUSE.gui.webgl.camera.position).normalize());if(ZUSE.SELECTED){if(b=b.intersectObject(ZUSE.plane),0<b.length){var e=b[0].point.sub(ZUSE.offset);ZUSE.adderObj.selection.setFromMouse(ZUSE.SELECTED.axis,e[ZUSE.SELECTED.axis.a],
!0)}}else if(b=b.intersectObjects(c?ZUSE.adderObj.selectables:ZUSE.adderObj.selectables2),0<b.length){if(c)e=b[0].object;else for(var c=!1,d=0,f=ZUSE.adderObj.selection.values;!c&&b[d];){var g=b[d].point;g.x>=f.x1&&(g.x<=f.x2&&g.y>=f.y1&&g.y<=f.y2&&g.z>=f.z1&&g.z<=f.z2)&&(e=b[d].object,c=!0);d++}void 0!==e?(ZUSE.INTERSECTED!=e&&(ZUSE.INTERSECTED&&ZUSE.INTERSECTED.guardian&&ZUSE.INTERSECTED.guardian.rayOut(),ZUSE.INTERSECTED=b[0].object,ZUSE.INTERSECTED&&ZUSE.INTERSECTED.guardian&&ZUSE.INTERSECTED.guardian.rayOver(),
ZUSE.plane.position.copy(ZUSE.INTERSECTED.position),ZUSE.plane.lookAt(ZUSE.gui.webgl.camera.position)),document.body.style.cursor="pointer"):(ZUSE.INTERSECTED&&ZUSE.INTERSECTED.guardian&&ZUSE.INTERSECTED.guardian.rayOut(),ZUSE.INTERSECTED=null,document.body.style.cursor="auto")}else ZUSE.INTERSECTED&&ZUSE.INTERSECTED.guardian&&ZUSE.INTERSECTED.guardian.rayOut(),ZUSE.INTERSECTED=null,document.body.style.cursor="auto"}},!1);ZUSE.gui.webgl.renderer.domElement.addEventListener("mousedown",function(b){if(ZUSE.adderObj.selection.enabled){b.preventDefault();
b=new THREE.Vector3(ZUSE.mouse.x,ZUSE.mouse.y,0.5);ZUSE.projector.unprojectVector(b,ZUSE.gui.webgl.camera);var b=new THREE.Raycaster(ZUSE.gui.webgl.camera.position,b.sub(ZUSE.gui.webgl.camera.position).normalize()),c=b.intersectObjects(ZUSE.adderObj.selectables);0<c.length&&(ZUSE.SELECTED=c[0].object,ZUSE.adderObj.selection.dragStart(ZUSE.SELECTED.axis),c=b.intersectObject(ZUSE.plane),ZUSE.offset.copy(c[0].point).sub(ZUSE.plane.position),document.body.style.cursor="move")}},!1);ZUSE.gui.webgl.renderer.domElement.addEventListener("mouseup",
function(b){ZUSE.adderObj.selection.enabled&&(b.preventDefault(),ZUSE.INTERSECTED&&(ZUSE.plane.position.copy(ZUSE.INTERSECTED.position),ZUSE.SELECTED=null),document.body.style.cursor="pointer")},!1);ZUSE.gui.webgl.renderer.domElement.addEventListener("mouseout",function(){ZUSE.INTERSECTED&&ZUSE.INTERSECTED.guardian&&ZUSE.INTERSECTED.guardian.rayOut();ZUSE.INTERSECTED=null;ZUSE.SELECTED=null;document.body.style.cursor="auto"},!1)};ZUSE.InitZutools={toolDefinitions:{back:["back",{click:function(){ZUSE.adderObj.cycleControl.cycleBackwards()},mouseover:function(){ZUSE.adderObj.cycleControl.preHighlightBack()},mouseout:function(){ZUSE.adderObj.cycleControl.preHighlightOff()}},!1,null,{disabled:!0}],replay:["replay",{click:function(){ZUSE.adderObj.cycleControl.repeatLast()},mouseover:function(){ZUSE.adderObj.cycleControl.preHighlightBack()},mouseout:function(){ZUSE.adderObj.cycleControl.preHighlightOff()}},!1,null,{disabled:!0}],
forward:["forward",{click:function(){ZUSE.adderObj.cycleControl.cycle()},mouseover:function(){ZUSE.adderObj.cycleControl.preHighlightNext()},mouseout:function(){ZUSE.adderObj.cycleControl.preHighlightOff()}},!1,null],layerA:["layerA",{click:function(){ZUSE.adderObj.changeSpacing(ZUSE.adderObj.getLayerNumber.A)}},!0,null],layerB:["layerB",{click:function(){ZUSE.adderObj.changeSpacing(ZUSE.adderObj.getLayerNumber.B)}},!0,null],layerC:["layerC",{click:function(){ZUSE.adderObj.changeSpacing(ZUSE.adderObj.getLayerNumber.C)}},
!0,null],layerD:["layerD",{click:function(){ZUSE.adderObj.changeSpacing(ZUSE.adderObj.getLayerNumber.D)}},!0,null],clipChange:["clipChange",null,!1,[{type:"slider",min:0,max:1E3,values:[0,1E3],onChange:function(b){ZUSE.adderObj.selection.setFromSlider("x",b[0],b[1])}},{type:"slider",min:0,max:1E3,values:[0,1E3],onChange:function(b){ZUSE.adderObj.selection.setFromSlider("y",b[0],b[1])}},{type:"slider",min:0,max:8,values:[0,8],onChange:function(b){ZUSE.adderObj.selection.setFromSlider("z",b[0],b[1])}}]],
clipDrag:["clipDrag",{click:function(){var b=!ZUSE.adderObj.selection.enabled;ZUSE.adderObj.selection.setActivation(b);ZUSE.gui.toolbar.toolsByName.select.disable(b)}},!0,null],clipReset:["clipReset",{click:function(){ZUSE.adderObj.selection.reset()}},!1,null],clipFading:["clipFading",{click:function(b){ZUSE.ShaderUniforms.activateFadingWidth(b)}},!0,[{type:"slider",min:0,max:100,values:[20],onChange:function(b){ZUSE.ShaderUniforms.setFadingWidthValue(b[0])}}]],clipTransp:["clipTransp",{click:function(b){ZUSE.ShaderUniforms.activateClippingTransparency(b)}},
!0,[{type:"slider",min:0,max:100,values:[40],onChange:function(b){ZUSE.ShaderUniforms.setClippingTransparencyValue(b[0]/100)}}]],visMS:["visMS",{click:function(b){ZUSE.Materials.MovingSheet.setVisibility(b)}},!0,[{type:"slider",min:0,max:100,values:[100],onChange:function(b){ZUSE.Materials.MovingSheet.setTransparency(b[0]/100)}}],{activated:!0}],visMP:["visMP",{click:function(b){ZUSE.Materials.MovingPin.setVisibility(b)}},!0,[{type:"slider",min:0,max:100,values:[100],onChange:function(b){ZUSE.Materials.MovingPin.setTransparency(b[0]/
100)}}],{activated:!0}],visSS:["visSS",{click:function(b){ZUSE.Materials.StaticSheet.setVisibility(b)}},!0,[{type:"slider",min:0,max:100,values:[100],onChange:function(b){ZUSE.Materials.StaticSheet.setTransparency(b[0]/100)}}],{activated:!0}],visSP:["visSP",{click:function(b){ZUSE.Materials.StaticPin.setVisibility(b)}},!0,[{type:"slider",min:0,max:100,values:[100],onChange:function(b){ZUSE.Materials.StaticPin.setTransparency(b[0]/100)}}],{activated:!0}],visIS:["visIS",{click:function(b){ZUSE.Materials.IntermediateSheet.setVisibility(b)}},
!0,[{type:"slider",min:0,max:100,values:[100],onChange:function(b){ZUSE.Materials.IntermediateSheet.setTransparency(b[0]/100)}}],{activated:!0}],viewReset:["viewReset",{click:function(){ZUSE.gui.webgl.camera.controls.reset()}},!1,null],highlight:["highlight",{click:function(){ZUSE.adderObj.cycleControl.switchHighlighting()}},!0,null,{activated:!0}],select:["select",{click:function(){ZUSE.adderObj.switchSelectables2()}},!0,null]},parseXML:function(b){var c={},d=b.getElementsByTagName("languages");
if(0<d.length){c.path=d[0].getAttribute("path");c.versions={};for(var e=d[0].getElementsByTagName("language"),d=0;d<e.length;d++){var f=e[d].getAttribute("id"),g=e[d].getAttribute("name");c.versions[f]=g;0===d&&(c.standard=f)}}e=[];d=b.getElementsByTagName("tabs");if(0<d.length){f=d[0].getElementsByTagName("tab");for(d=0;d<f.length;d++)e.push(f[d].getAttribute("id"))}f=[];d=b.getElementsByTagName("tools");if(0<d.length){b=d[0].getElementsByTagName("toolgroup");for(d=0;d<b.length;d++){for(var g=[],
h=b[d].getElementsByTagName("tool"),i=0;i<h.length;i++){var j=h[i].getAttribute("id");this.toolDefinitions[j]&&g.push(this.toolDefinitions[j])}f.push(g)}}ZUSE.gui=new ZUTOOLS.LayoutManager({languages:c,tabs:e,tools:f});c={mouseover:function(){ZUSE.adderObj.highlightPart(["B","BF4"],2,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["B","BF4"],2,!1)}};ZUSE.inputs={A3:ZUSE.gui.controls.addDigit("A3",{click:function(){return ZUSE.adderObj.cycleControl.switchInput("A3",null)},mouseover:function(){ZUSE.adderObj.highlightPart(["In",
"A3"],2,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["In","A3"],2,!1)}}).inputOn().setShow(!0),A2:ZUSE.gui.controls.addDigit("A2",{click:function(){return ZUSE.adderObj.cycleControl.switchInput("A2",null)},mouseover:function(){ZUSE.adderObj.highlightPart(["In","A2"],2,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["In","A2"],2,!1)}}).inputOn().setShow(!0),A1:ZUSE.gui.controls.addDigit("A1",{click:function(){return ZUSE.adderObj.cycleControl.switchInput("A1",null)},mouseover:function(){ZUSE.adderObj.highlightPart(["In",
"A1"],2,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["In","A1"],2,!1)}}).inputOn().setShow(!0),A0:ZUSE.gui.controls.addDigit("A0",{click:function(){return ZUSE.adderObj.cycleControl.switchInput("A0",null)},mouseover:function(){ZUSE.adderObj.highlightPart(["In","A0"],2,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["In","A0"],2,!1)}}).inputOn().setShow(!0),B3:ZUSE.gui.controls.addDigit("B3",{click:function(){return ZUSE.adderObj.cycleControl.switchInput("B3",null)},mouseover:function(){ZUSE.adderObj.highlightPart(["In",
"B3"],1,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["In","B3"],1,!1)}}).inputOn().setShow(!0),B2:ZUSE.gui.controls.addDigit("B2",{click:function(){return ZUSE.adderObj.cycleControl.switchInput("B2",null)},mouseover:function(){ZUSE.adderObj.highlightPart(["In","B2"],1,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["In","B2"],1,!1)}}).inputOn().setShow(!0),B1:ZUSE.gui.controls.addDigit("B1",{click:function(){return ZUSE.adderObj.cycleControl.switchInput("B1",null)},mouseover:function(){ZUSE.adderObj.highlightPart(["In",
"B1"],1,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["In","B1"],1,!1)}}).inputOn().setShow(!0),B0:ZUSE.gui.controls.addDigit("B0",{click:function(){return ZUSE.adderObj.cycleControl.switchInput("B0",null)},mouseover:function(){ZUSE.adderObj.highlightPart(["In","B0"],1,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["In","B0"],1,!1)}}).inputOn().setShow(!0),F4s:ZUSE.gui.controls.addDigit("F4s",c),F3s:ZUSE.gui.controls.addDigit("F3s",{mouseover:function(){ZUSE.adderObj.highlightPart(["B",
"BF3"],2,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["B","BF3"],2,!1)}}),F2s:ZUSE.gui.controls.addDigit("F2s",{mouseover:function(){ZUSE.adderObj.highlightPart(["B","BF2"],2,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["B","BF2"],2,!1)}}),F1s:ZUSE.gui.controls.addDigit("F1s",{mouseover:function(){ZUSE.adderObj.highlightPart(["B","BF1"],2,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["B","BF1"],2,!1)}}),K4s:ZUSE.gui.controls.addDigit("K4s",c),K3s:ZUSE.gui.controls.addDigit("K3s",
{mouseover:function(){ZUSE.adderObj.highlightPart(["D","DK3"],3,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["D","DK3"],3,!1)}}),K2s:ZUSE.gui.controls.addDigit("K2s",{mouseover:function(){ZUSE.adderObj.highlightPart(["C","CK2"],3,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["C","CK2"],3,!1)}}),K1s:ZUSE.gui.controls.addDigit("K1s",{mouseover:function(){ZUSE.adderObj.highlightPart(["D","DK1"],3,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["D","DK1"],3,!1)}}),K0s:ZUSE.gui.controls.addDigit("K0s",
{mouseover:function(){ZUSE.adderObj.highlightPart(["C","CK0"],3,!0)},mouseout:function(){ZUSE.adderObj.highlightPart(["C","CK0"],3,!1)}}),Z1:ZUSE.gui.controls.addDigit("Z1"),Z2:ZUSE.gui.controls.addDigit("Z2"),Z3:ZUSE.gui.controls.addDigit("Z3")}}};ZUSE.WebGLErrorMessage=function(){var b;try{var c=document.createElement("canvas");b=!!window.WebGLRenderingContext&&(c.getContext("webgl")||c.getContext("experimental-webgl"))}catch(d){b=!1}return!b?(document.body.style.margin="20px",document.body.style.overflow="auto",document.write(' \t\t\tTo view the simulation you need a browser with activated <a href="http://get.webgl.org/">WebGL</a>. \t\t\t<ol style="line-height: 1.6;"> \t\t\t\t<li>Make sure you have a current version of your browser installed.</li> \t\t\t\t<li>If necessary, activate WebGL in your browser. \t\t\t\t\t<ul style="line-height: 2.4; font-size: 18px;"> \t\t\t\t\t\t<li>Firefox: Open <tt class="greybox">about:config</tt> und set <tt class="greybox">webgl.force-enabled</tt> to <tt class="greybox">true</tt>.</li> \t\t\t\t\t\t<li>Chrome: Start Chrome with flag <tt class="greybox">--ignore-gpu-blacklist</tt>.</li> \t\t\t\t\t\t<li>Safari: Open a terminal and run the following command:<br/> \t\t\t\t\t\t\t<tt class="greybox">defaults write com.apple.Safari WebKitWebGLEnabled -bool YES</tt> \t\t\t\t\t\t</li> \t\t\t\t\t\t<li>Opera: Open <tt class="greybox">opera:config</tt> and set \t\t\t\t\t\t\t<tt class="greybox">Enable WebGL</tt> and \t\t\t\t\t\t\t<tt class="greybox">Enable Hardware Acceleration</tt> to <tt class="greybox">1</tt>. \t\t\t\t\t\t</li> \t\t\t\t\t</ul> \t\t\t\t</li> \t\t\t</ol> \t\t\t<span style="font-size: 12px;"> \t\t\t\t<h2>Imprint</h2> \t\t\t\t<p>Responsible for this site:<br/> \t\t\t\tJakob Mischek, Dauerwaldweg 1, 14055 Berlin<br/> \t\t\t\tE-Mail: <a href="mailto:jakob.mischek@daign.de">jakob.mischek@daign.de</a></p> \t\t\t</span><br/>\t\t\tGo to the <a href="http://zuse.zib.de/">Konrad Zuse Internet Archive</a>'),
!0):!1};ZUSE.Simulation=function(){if(!ZUSE.WebGLErrorMessage()){var b=this.loadProjectFile(),c=function(c){c=b.getElementsByTagName(c);return 0<c.length?c[0]:null};ZUSE.InitZutools.parseXML(c("gui"));ZUSE.InitObj(c("structure"));ZUSE.TriggerRules.parseXML(c("rules"));ZUSE.InitPicking()}};ZUSE.Simulation.prototype={constructor:ZUSE.Simulation,loadProjectFile:function(){return ZUSE.XMLUtils.loadXML("projects/adder/Project.xml")}};ZUSE.TempCalculator={values:{A3:!1,A2:!1,A1:!1,A0:!1,B3:!1,B2:!1,B1:!1,B0:!1,F4:!1,F3:!1,F2:!1,F1:!1,F0:!1,K4:!1,K3:!1,K2:!1,K1:!1,K0:!1,Z1:0,Z2:0,Z3:0},updateValues:function(){var b=this.values.A0,c=this.values.A1,d=this.values.A2,e=this.values.A3,f=this.values.B0,g=this.values.B1,h=this.values.B2,i=this.values.B3;this.values.F1=b&&f||(b||f)&&this.values.F0;this.values.F2=c&&g||(c||g)&&this.values.F1;this.values.F3=d&&h||(d||h)&&this.values.F2;this.values.F4=e&&i||(e||i)&&this.values.F3;this.values.K0=
(b&&f||!(b||f))===this.values.F0;this.values.K1=(c&&g||!(c||g))===this.values.F1;this.values.K2=(d&&h||!(d||h))===this.values.F2;this.values.K3=(e&&i||!(e||i))===this.values.F3;this.values.K4=this.values.F4;this.values.Z1=8*e+4*d+2*c+1*b;this.values.Z2=8*i+4*h+2*g+1*f;this.values.Z3=this.values.Z1+this.values.Z2;this.updateZs()},resetValues:function(){this.values.A0=!1;this.values.A1=!1;this.values.A2=!1;this.values.A3=!1;this.values.B0=!1;this.values.B1=!1;this.values.B2=!1;this.values.B3=!1;this.updateValues()},
string:function(b,c){return(c?"+":" ")+(10>b?" ":"")+b},updateZs:function(){ZUSE.inputs.Z1.setText(this.string(this.values.Z1,!1));ZUSE.inputs.Z2.setText(this.string(this.values.Z2,!0))},cycle:function(b){switch(b){case 2:ZUSE.inputs.F4s.setValue(this.values.F4);ZUSE.inputs.F3s.setValue(this.values.F3);ZUSE.inputs.F2s.setValue(this.values.F2);ZUSE.inputs.F1s.setValue(this.values.F1);break;case 3:ZUSE.inputs.K4s.setValue(this.values.K4);ZUSE.inputs.K3s.setValue(this.values.K3);ZUSE.inputs.K2s.setValue(this.values.K2);
ZUSE.inputs.K1s.setValue(this.values.K1);ZUSE.inputs.K0s.setValue(this.values.K0);ZUSE.inputs.Z3.setText(this.string(this.values.Z3,!1));break;case 4:ZUSE.inputs.A3.setToZero(),ZUSE.inputs.A2.setToZero(),ZUSE.inputs.A1.setToZero(),ZUSE.inputs.A0.setToZero(),ZUSE.inputs.B3.setToZero(),ZUSE.inputs.B2.setToZero(),ZUSE.inputs.B1.setToZero(),ZUSE.inputs.B0.setToZero(),ZUSE.inputs.F4s.setToEmpty(),ZUSE.inputs.F3s.setToEmpty(),ZUSE.inputs.F2s.setToEmpty(),ZUSE.inputs.F1s.setToEmpty(),ZUSE.inputs.K4s.setToEmpty(),
ZUSE.inputs.K3s.setToEmpty(),ZUSE.inputs.K2s.setToEmpty(),ZUSE.inputs.K1s.setToEmpty(),ZUSE.inputs.K0s.setToEmpty(),ZUSE.inputs.Z1.setText("  0"),ZUSE.inputs.Z2.setText("+ 0"),ZUSE.inputs.Z3.setText("   "),this.resetValues()}},cycleBackwards:function(b){switch(b){case 2:ZUSE.inputs.F4s.setToEmpty();ZUSE.inputs.F3s.setToEmpty();ZUSE.inputs.F2s.setToEmpty();ZUSE.inputs.F1s.setToEmpty();break;case 3:ZUSE.inputs.K4s.setToEmpty(),ZUSE.inputs.K3s.setToEmpty(),ZUSE.inputs.K2s.setToEmpty(),ZUSE.inputs.K1s.setToEmpty(),
ZUSE.inputs.K0s.setToEmpty(),ZUSE.inputs.Z3.setText("   ")}}};ZUSE.SVG={};ZUSE.SVG.CircuitElement=function(b){this.ref=ZUSE.gui.circuit.getElementById(b.getAttribute("ref"));this.workPosition=void 0;0<b.childElementCount&&(this.workPosition=parseInt(b.firstElementChild.getAttribute("position")))};
ZUSE.SVG.CircuitElement.prototype={constructor:ZUSE.SVG.CircuitElement,setHighlight:function(){},_setHighlight:function(b){this.ref.style.stroke=b?"#f83610":"black";this.ref.style.fill=b?"#f83610":"black";this.ref.style.strokeWidth=b?3:1.5},antiHighlight:function(b){this.ref.style.stroke=b?"#999":"black";this.ref.style.fill=b?"#999":"black"},setPosition:function(b){this.workPosition===b?this._setHighlight(!0):this._setHighlight(!1)},failedToChange:function(){this.antiHighlight(!0)}};ZUSE.WebGL={};ZUSE.WebGL.Sheet=function(b,c){var d=parseInt(b.getAttribute("x")),e=parseInt(b.getAttribute("y"));if(0<b.childElementCount)var f=b.firstElementChild,g="true"===f.getAttribute("x"),f="true"===f.getAttribute("y");this.thickness=(this.intermediate=c.intermediate)?10:3;var h=b.getAttribute("file");this.level=this.intermediate?1.5:2*parseInt(b.getAttribute("level"))+1;var i={amount:this.thickness,bevelEnabled:!1,steps:1},d=ZUSE.Shapes.getShape(h,d,e).extrude(i);this.material=g||f?ZUSE.Materials.MovingSheet.shader:
this.intermediate?ZUSE.Materials.IntermediateSheet.shader:ZUSE.Materials.StaticSheet.shader;this.mesh=new THREE.Mesh(d,this.material);this.mesh.guardian=this;this.setHeight(c.spacing)};
ZUSE.WebGL.Sheet.prototype={constructor:ZUSE.WebGL.Sheet,setHeight:function(b){this.mesh.position.z=this.level*b-this.thickness/2},setHighlight:function(b){this.mesh.material=b&&ZUSE.adderObj.cycleControl.highlightMoving?ZUSE.Materials.Highlight.shader:this.material},move:function(b,c){switch(b){case 1:this.mesh.position.y=-c;break;case 2:this.mesh.position.x=c;break;case 3:this.mesh.position.y=-10+c;break;case 4:this.mesh.position.x=10-c}},rayOver:function(){this.mesh.material=ZUSE.Materials.Highlight.shader},
rayOut:function(){this.mesh.material=this.material}};ZUSE.WebGL.Pin=function(b,c){var d=parseInt(b.getAttribute("x")),e=parseInt(b.getAttribute("y"));this.l1=parseInt(b.getAttribute("l1"));this.l2=parseInt(b.getAttribute("l2"));if(0<b.childElementCount){var f=b.firstElementChild,g="true"===f.getAttribute("x"),f="true"===f.getAttribute("y");this.l1=isNaN(this.l1)?0:2*this.l1;this.l2=isNaN(this.l2)?2*c.levels:2*this.l2+2}else if(isNaN(this.l1)&&(this.l1=0),isNaN(this.l2))this.l2=2*c.levels;var h=parseInt(b.getAttribute("radius"))||4,i=new THREE.Shape;
i.moveTo(d,e);switch(h){case 4:i.moveBy(5,5);i.circle(4);break;case 6:i.moveBy(10,10),i.circle(6)}d=i.extrude({amount:1,bevelEnabled:!1,steps:1});this.material=g||f?ZUSE.Materials.MovingPin.shader:ZUSE.Materials.StaticPin.shader;this.mesh=new THREE.Mesh(d,this.material);this.mesh.guardian=this;this.setHeight(c.spacing)};
ZUSE.WebGL.Pin.prototype={constructor:ZUSE.WebGL.Pin,setHeight:function(b){var c=this.l1*b,b=this.l2*b;this.mesh.position.z=c;this.mesh.scale.z=b-c},setHighlight:function(b){this.mesh.material=b&&ZUSE.adderObj.cycleControl.highlightMoving?ZUSE.Materials.Highlight.shader:this.material},move:function(b,c){switch(b){case 1:this.mesh.position.y=-c;break;case 2:this.mesh.position.x=c;break;case 3:this.mesh.position.y=-10+c;break;case 4:this.mesh.position.x=10-c}},rayOver:function(){this.mesh.material=
ZUSE.Materials.Highlight.shader},rayOut:function(){this.mesh.material=this.material}};
