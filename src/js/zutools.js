ZUTOOLS={};ZUTOOLS.LayoutManager=function(a){var b=this;a.tools[0].push(this.generateLanguageTool(a.languages,b));this.tooltip=new ZUTOOLS.TooltipManager;this.toolbar=new ZUTOOLS.Toolbar(a.tools,this.tooltip);this.separator=new ZUTOOLS.Separator(this);this.webgl=new ZUTOOLS.WebGL;this.status=new ZUTOOLS.Status;this.controls=new ZUTOOLS.Controls;this.tabbar=new ZUTOOLS.Tabbar(a.tabs);this.lang=new ZUTOOLS.Languages(a.languages);this.width=window.innerWidth;this.height=window.innerHeight;this.columns=[];this.setColumns(0,
this.width/10);this.setColumns(1,this.width/50);this.setSizes();this.fillWithTexts();window.addEventListener("resize",function(){var a=window.innerWidth;b.setColumns(0,b.columns[0]/b.width*a);b.setColumns(1,b.columns[1]/b.width*a);b.width=a;b.height=window.innerHeight;b.setSizes()},!1)};
ZUTOOLS.LayoutManager.prototype={constructor:ZUTOOLS.LayoutManager,setSizes:function(){var a=Math.min(Math.max(this.columns[0],40),this.width/3),b=Math.min(Math.max(this.columns[1],5),40),c=this.width,d=this.height;this.toolbar.setSize(a+1,d+1);this.separator.setSize(b+1,d+1,a);this.webgl.setSize(c-a-b+1,d+1,a+b);this.controls.setSize(c-a-b+1,d+1,a+b);this.tabbar.setSize(c-a-b+1,d+1,a+b);this.status.setSize(c,d+1,a+b)},setColumns:function(a,b){this.columns[a]=Math.max(0.1,b)},confinedSum:function(){var a=
Math.min(Math.max(this.columns[0],40),this.width/3),b=Math.min(Math.max(this.columns[1],5),40);return a+b},fillWithTexts:function(){this.controls.setTitle(this.lang.get("title",0));this.status.setText(this.lang.get("status",1));for(var a in this.tabbar.tabs)this.tabbar.tabs[a].setContent(this.lang.get(a));this.tabbar.setConsecutiveSize();for(a in this.toolbar.toolsByName)this.toolbar.toolsByName[a].setTooltip(this.lang.getTool(a))},generateLanguageTool:function(a,b){return["languages",null,!1,[{type:"selection",
options:a.versions,selected:a.standard,onchange:function(a){b.lang.setLanguage(a);b.fillWithTexts()}}]]}};ZUTOOLS.Languages=function(a){this.config=a;this.setLanguage(this.getShortcutFromURL())};
ZUTOOLS.Languages.prototype={constructor:ZUTOOLS.Languages,getShortcutFromURL:function(){var a=window.location.search.match(/(?:lang=)([a-z]{2})/);return a&&a[1]?a[1]:null},setLanguage:function(a){this.config.versions[a]||(a=this.config.standard);a=this.config.versions[a]+".xml";this.textStore={};this.fillStore(this.config.path+a,this.textStore);this.textStore.logic[1]=ZUTOOLS.Utils.loadXML("projects/adder/circuit.svg").lastChild;this.toolStore={};this.fillStore("images/icons/languages/"+a,this.toolStore,
!0)},fillStore:function(a,b,c){for(var a=ZUTOOLS.Utils.loadXML(a).lastChild.lastElementChild,d=0;d<a.childElementCount;d++){var f=a.children[d],g=f.id;b[g]=[f.children[0].innerHTML];if(!c)for(var e=1;e<f.childElementCount;e++)b[g].push(f.children[e])}},get:function(a,b){return b?this.textStore[a][b]:this.textStore[a]},getTool:function(a){return this.toolStore[a][0]}};ZUTOOLS.Separator=function(a){var b=this;this.parent=a;this.left=void 0;this.div=document.createElement("div");this.div.style.position="absolute";this.div.style.top="0px";this.div.setAttribute("class","action col");document.body.appendChild(this.div);this.div.addEventListener("mousedown",function(a){function d(a){a.preventDefault();a.stopPropagation()}function f(a){b.parent.setColumns(0,e+a.clientX-j);b.parent.setSizes()}function g(){document.removeEventListener("selectstart",d,!1);document.removeEventListener("mousemove",
f,!1);document.removeEventListener("mouseup",g,!1)}var e=b.left,j=a.clientX;document.addEventListener("selectstart",d,!1);document.addEventListener("mousemove",f,!1);document.addEventListener("mouseup",g,!1)},!1)};ZUTOOLS.Separator.prototype={constructor:ZUTOOLS.Separator,setSize:function(a,b,c){this.div.style.width=a+"px";this.div.style.height=b+"px";this.left=c;this.div.style.left=c+"px"}};ZUTOOLS.Toolbar=function(a,b){this.height=this.width=void 0;this.tooltipManager=b;this.div=document.createElement("div");this.div.style.position="absolute";this.div.style.top="0px";this.div.style.left="0px";this.div.style.background="#3d9ecb";document.body.appendChild(this.div);this.svg=document.createElementNS(ZUTOOLS.Utils.SVG,"svg");this.svg.setAttribute("xmlns:xlink",ZUTOOLS.Utils.XLink);this.svg.setAttribute("width","100%");this.svg.setAttribute("height","100%");this.div.appendChild(this.svg);
this.svg.appendChild(ZUTOOLS.Utils.loadXML("images/tool.svg").documentElement.firstElementChild.nextElementSibling);this.tools=[];this.toolsByName={};for(var c=0;c<a.length;c++)for(var d=0;d<a[c].length;d++){var f=a[c][d][0],g=new ZUTOOLS.Tool(a[c][d],b,this.svg);this.tools.push(g);this.toolsByName[f]=g}};
ZUTOOLS.Toolbar.prototype={constructor:ZUTOOLS.Toolbar,setSize:function(a,b){this.width=a;this.height=b;this.div.style.width=a+"px";this.div.style.height=b+"px";this.shuffle()},shuffle:function(){this.tooltipManager.hideTooltip();for(var a=this.width-1,b=this.height-1,c=this.tools.length,d=1,f=24*(b/(24*Math.ceil(c/d)+2));f*d+f+2<=a;)d++,f=24*(b/(24*Math.ceil(c/d)+2));a=Math.min(a/(d+1/12),f);for(b=0;b<this.tools.length;b++)this.tools[b].setSize(1+24*(b%d),1+24*Math.floor(b/d),a)}};ZUTOOLS.WebGL=function(){function a(){requestAnimationFrame(a);b.camera.controls.update();b.renderer.render(b.scene,b.camera);TWEEN.update()}var b=this;this.div=document.createElement("div");this.div.style.position="absolute";this.div.style.top="0px";this.div.style.background="#fff";document.body.appendChild(this.div);this.renderer=new THREE.WebGLRenderer({antialias:!0});this.div.appendChild(this.renderer.domElement);this.scene=new THREE.Scene;this.camera=new THREE.PerspectiveCamera(50,1,1,2500);
this.camera.controls=new ZUSE.CameraControls(this.camera,this.renderer.domElement);this.camera.controls.reset();this.scene.add(this.camera);a()};
ZUTOOLS.WebGL.prototype={constructor:ZUTOOLS.WebGL,setSize:function(a,b,c){this.div.style.width=a+"px";this.div.style.height=b+"px";this.div.style.left=c+"px";this.camera.aspect=a/b;this.camera.updateProjectionMatrix();this.renderer.setSize(a,b);this.camera.controls.screen.width=a;this.camera.controls.screen.height=b;this.camera.controls.screen.offsetLeft=c;this.camera.controls.radius=(a+b)/4}};ZUTOOLS.Tool=function(a,b,c){function d(){return e.tooltipContent}function f(){return e.metrics}function g(){return null!==e.inputs}var e=this;this.tooltipManager=b;this.id=a[0];this.activatable=a[2];this.disabled=this.activated=!1;this.events=a[1];this.tooltipContent=document.createElement("div");this.title=document.createTextNode("");this.tooltipContent.appendChild(this.title);this.sliders=[];this.inputs=this.generateInputs(a[3]);null!==this.inputs&&this.tooltipContent.appendChild(this.inputs);
this.tagAsTooltip(this.tooltipContent);this.metrics={x:0,y:0,width:0};c.appendChild(ZUTOOLS.Utils.loadXML("images/icons/"+this.id+".svg").documentElement.firstElementChild.nextElementSibling.nextElementSibling);this.group=document.createElementNS(ZUTOOLS.Utils.SVG,"g");this.group.setAttribute("class","tool");c.appendChild(this.group);this.rectangle=document.createElementNS(ZUTOOLS.Utils.SVG,"use");this.rectangle.setAttributeNS(ZUTOOLS.Utils.XLink,"href","#tool");this.group.appendChild(this.rectangle);
this.icon=document.createElementNS(ZUTOOLS.Utils.SVG,"use");this.icon.setAttributeNS(ZUTOOLS.Utils.XLink,"href","#"+this.id);this.icon.setAttribute("class","icon");this.group.appendChild(this.icon);this.tick=document.createElementNS(ZUTOOLS.Utils.SVG,"use");this.tick.setAttributeNS(ZUTOOLS.Utils.XLink,"href","#tick");this.tick.setAttribute("class","tick");this.tick.style.visibility="hidden";this.group.appendChild(this.tick);this.group.addEventListener("click",function(){e.disabled||(e.activatable&&
e.switchActivation(),e.events&&e.events.click?(e.events.click(e.activated),e.tooltipManager.toolclick()):e.tooltipManager.toolclickopen(e.id,d,f,g))},!1);this.group.addEventListener("mouseover",function(){e.disabled||(e.events&&e.events.mouseover&&e.events.mouseover(),e.tooltipManager.toolover(d,f,g))},!1);this.group.addEventListener("mouseout",function(a){e.disabled||(e.events&&e.events.mouseout&&e.events.mouseout(),e.tooltipManager.toolout(a))},!1)};
ZUTOOLS.Tool.prototype={constructor:ZUTOOLS.Tool,setSize:function(a,b,c){this.metrics={x:a,y:b,factor:c/24};this.group.setAttribute("transform","scale("+c/24+") translate("+a+","+b+")")},switchActivation:function(){this.activated=!this.activated;this.showActivation(this.activated);for(var a=0;a<this.sliders.length;a++)this.sliders[a].setActivation(this.activated);return this},showActivation:function(a){this.tick.style.visibility=a?"visible":"hidden"},disable:function(a){this.disabled=void 0===a?!0:
a;this.group.setAttribute("class",this.disabled?"toolDisabled":"tool");this.tick.setAttribute("class",this.disabled?"tickDisabled":"tick")},setTooltip:function(a){this.title.nodeValue=a},generateInputs:function(a){if(null!==a){var b=document.createElement("div");b.setAttribute("class","inputcontainer");for(var c in a)switch(a[c].type){case "button":var d=new ZUTOOLS.Button(a[c]);b.appendChild(d.domNode);break;case "selection":var f=this.tooltipManager,d=new ZUTOOLS.Selection(a[c],function(){f.toolclick()});
b.appendChild(d.domNode);break;case "slider":d=new ZUTOOLS.Slider(a[c]),b.appendChild(d.domNode),this.activatable&&d.setActivation(!1),this.sliders.push(d)}return b}return null},tagAsTooltip:function(a){a.dataset.zutooltip="true";for(var b=0;b<a.children.length;b++)this.tagAsTooltip(a.children[b])}};ZUTOOLS.Controls=function(){var a=this;this.expanded=!0;this.bigger=!1;this.div=document.createElement("div");this.div.style.position="absolute";this.div.style.top="10px";this.div.style.width="270px";document.body.appendChild(this.div);this.title=document.createElement("div");this.title.setAttribute("class","controltitle action topcorners pointer");this.title.style.padding="8px";this.div.appendChild(this.title);this.title.addEventListener("click",function(){a.switchExpanded()},!1);this.input=document.createElement("div");
this.input.style.background="#ddd";this.div.appendChild(this.input);this.svg=document.createElementNS(ZUTOOLS.Utils.SVG,"svg");this.svg.setAttribute("xmlns:xlink",ZUTOOLS.Utils.XLink);this.svg.setAttribute("viewBox","0, 0, 180, 100");this.svg.setAttribute("width","270px");this.svg.setAttribute("height","150px");this.svg.style.display="block";this.input.appendChild(this.svg);var b=document.createElementNS(ZUTOOLS.Utils.SVG,"line");b.setAttribute("x1",10);b.setAttribute("x2",108);b.setAttribute("y1",
68);b.setAttribute("y2",68);b.setAttribute("class","line");this.svg.appendChild(b);b=document.createElementNS(ZUTOOLS.Utils.SVG,"line");b.setAttribute("x1",126);b.setAttribute("x2",170);b.setAttribute("y1",68);b.setAttribute("y2",68);b.setAttribute("class","line");this.svg.appendChild(b);this.scale=document.createElement("div");this.scale.setAttribute("class","action bottomcorners pointer");this.scale.style.height="10px";this.div.appendChild(this.scale);this.scale.addEventListener("click",function(){a.expanded?
(a.bigger=!a.bigger,a.div.style.width=a.bigger?"450px":"270px",a.svg.setAttribute("width",a.bigger?"450px":"270px"),a.svg.setAttribute("height",a.bigger?"250px":"150px")):a.switchExpanded()},!1)};
ZUTOOLS.Controls.prototype={constructor:ZUTOOLS.Controls,setSize:function(a,b,c){this.div.style.left=c+10+"px"},switchExpanded:function(){this.expanded=!this.expanded;this.input.style.display=this.expanded?"block":"none"},addDigit:function(a,b,c,d){return new ZUTOOLS.Digit(this.svg,a,b,c,d)},setTitle:function(a){this.title.innerHTML=a}};ZUTOOLS.Digit=function(a,b,c,d,f){function g(){h.input&&h.setValue(h.events.click())}function e(){h.show&&h.events.mouseover()}function j(){h.show&&h.events.mouseout()}var h=this;this.events=f;this.input=this.show=!1;this.group=document.createElementNS(ZUTOOLS.Utils.SVG,"g");this.group.setAttribute("transform","translate("+b+","+c+")");this.group.setAttribute("class","digit");a.appendChild(this.group);this.events&&(a=document.createElementNS(ZUTOOLS.Utils.SVG,"rect"),a.setAttribute("rx",d?2:4),a.setAttribute("ry",
d?2:4),a.setAttribute("width",d?"9px":"18px"),a.setAttribute("height",d?"12px":"24px"),this.group.appendChild(a),this.events.click&&this.group.addEventListener("click",g,!1),this.events.mouseover&&this.events.mouseout&&(this.group.addEventListener("mouseover",e,!1),this.group.addEventListener("mouseout",j,!1)));a=document.createElementNS(ZUTOOLS.Utils.SVG,"text");a.setAttribute("x",d?1.5:3);a.setAttribute("y",d?10:20);a.setAttribute("class","inputText");a.style.fontSize=d?"10px":"20px";a.setAttributeNS(ZUTOOLS.Utils.XML,
"xml:space","preserve");this.group.appendChild(a);this.textNode=document.createTextNode("");a.appendChild(this.textNode)};
ZUTOOLS.Digit.prototype={constructor:ZUTOOLS.Digit,setToEmpty:function(){this.textNode.nodeValue="";this.setShow(!1);return this},setToZero:function(){this.textNode.nodeValue="0";this.setShow(!0);return this},setToOne:function(){this.textNode.nodeValue="1";this.setShow(!0);return this},setToPlus:function(){this.textNode.nodeValue="+";this.setShow(!1);return this},setText:function(a){this.textNode.nodeValue=a;this.setShow(!1);return this},setValue:function(a){void 0!==a&&(a?this.setToOne():this.setToZero());
return this},inputOn:function(){this.setInput(!0);return this},inputOff:function(){this.setInput(!1);return this},setShow:function(a){this.show=a;this.setClass()},setInput:function(a){this.input=a;this.setClass()},setClass:function(){this.input?this.group.setAttribute("class","digitInput"):this.show?this.group.setAttribute("class","digitShow"):this.group.setAttribute("class","digit")}};ZUTOOLS.Tabbar=function(a){this.div=document.createElement("div");this.div.style.position="absolute";document.body.appendChild(this.div);this.tabs={};for(var b=0;b<a.length;b++)this.tabs[a[b]]=new ZUTOOLS.Tab(this)};ZUTOOLS.Tabbar.prototype={constructor:ZUTOOLS.Tabbar,setSize:function(a,b,c){this.div.style.top=b+"px";this.div.style.left=c+10+"px";this.setConsecutiveSize()},setConsecutiveSize:function(){var a=0,b;for(b in this.tabs)a=this.tabs[b].setPosition(a)},closeAll:function(){for(var a in this.tabs)this.tabs[a].close()}};ZUTOOLS.Tab=function(a){var b=this;this.parent=a;this.expanded=!1;this.title=document.createElement("div");this.title.style.position="absolute";this.title.setAttribute("class","action topcorners");this.title.style.padding="8px";this.title.style.cursor="pointer";this.title.style.zIndex=2;a.div.appendChild(this.title);this.closer=document.createElement("div");this.closer.style.position="absolute";this.closer.setAttribute("class","closer");this.closer.style.padding="8px";this.closer.style.cursor="pointer";
this.closer.style.zIndex=1;a.div.appendChild(this.closer);this.content=document.createElement("div");this.content.style.position="absolute";this.content.style.top="0px";this.content.style.left="0px";this.content.style.display="none";this.content.setAttribute("class","topborder greybox bigpadding");a.div.appendChild(this.content);this.title.addEventListener("click",function(){b.switchExpanded()},!1);this.closer.addEventListener("click",function(){b.close()},!1)};
ZUTOOLS.Tab.prototype={constructor:ZUTOOLS.Tab,setPosition:function(a){this.setPositionTop();this.title.style.left=a+"px";this.closer.style.left=a+"px";return a+this.title.offsetWidth+2},setPositionTop:function(){this.expanded?(this.title.style.top=-this.content.offsetHeight-this.title.offsetHeight+"px",this.content.style.top=-this.content.offsetHeight+"px"):(this.title.style.top=-this.title.offsetHeight+"px",this.content.style.top="0px");this.closer.style.top=-this.title.offsetHeight+"px"},close:function(){this.expanded=
!1;this.content.style.display="none";this.setPositionTop()},open:function(){this.expanded=!0;this.content.style.display="block";this.setPositionTop()},switchExpanded:function(){this.expanded?this.close():(this.parent.closeAll(),this.open())},setContent:function(a){this.title.innerHTML=a[0];for(this.closer.innerHTML=a[0];this.content.hasChildNodes();)this.content.removeChild(this.content.firstChild);this.content.appendChild(a[1])}};ZUTOOLS.Status=function(){this.div=document.createElement("div");this.div.style.position="absolute";document.body.appendChild(this.div);this.states=[];this.addStates(4);this.activate(0)};
ZUTOOLS.Status.prototype={constructor:ZUTOOLS.Status,setSize:function(a,b){this.div.style.top=b-110+"px";this.div.style.left=a-260+"px"},addStates:function(a){for(var b=0;b<a;b++){var c=document.createElement("div");c.setAttribute("class","stat");this.div.appendChild(c);this.states.push(c)}},activate:function(a){for(var b=0;b<this.states.length;b++)this.states[b].setAttribute("class","stat");this.states[a].setAttribute("class","stat statActive")},setText:function(a){for(var a=a.firstElementChild.children,
b=0;b<a.length;b++)this.states[b].innerHTML=b+1+". "+a[b].innerHTML}};ZUTOOLS.Tooltip=function(){var a=this;this.hidingBlocked=this.wasClicked=!1;this.span=document.createElement("span");document.body.appendChild(this.span);this.hide();this.bridge=document.createElement("div");this.bridge.dataset.zutooltip="true";this.bridge.setAttribute("class","tooltip");this.span.appendChild(this.bridge);this.pike=document.createElement("div");this.pike.setAttribute("class","tooltip pike diagonal");this.span.appendChild(this.pike);this.frame=document.createElement("div");this.frame.dataset.zutooltip=
"true";this.frame.setAttribute("class","tooltip frame corners small");this.span.appendChild(this.frame);this.span.addEventListener("mouseout",function(b){!a.wasClicked&&(!a.hidingBlocked&&!a.isTool(b.relatedTarget)&&!a.isPartOfTooltip(b.relatedTarget))&&a.hide()},!1)};
ZUTOOLS.Tooltip.prototype={constructor:ZUTOOLS.Tooltip,show:function(){this.span.style.visibility="visible"},hide:function(){this.span.style.visibility="hidden"},setContent:function(a){for(;this.frame.hasChildNodes();)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(a)},setMetrics:function(a){var b=a.x,c=a.y,a=a.factor,d=(c+1)*a;d+this.frame.offsetHeight>window.innerHeight&&(d=window.innerHeight-this.frame.offsetHeight-2*a);this.frame.style.top=d+"px";this.frame.style.left=(b+
24)*a+"px";this.bridge.style.top=(c+1)*a+"px";this.bridge.style.left=(b+22)*a+"px";this.bridge.style.width=3*a+"px";this.bridge.style.height=22*a+"px";this.pike.style.top=(c+1)*a+6+"px";this.pike.style.left=(b+24)*a+1+"px";b=Math.sqrt(0.5)*(Math.min(43,22*a)-12);this.pike.style.width=b+"px";this.pike.style.height=b+"px"},isTool:function(a){return a&&a.href&&"#tool"===a.href.baseVal},isPartOfTooltip:function(a){return a&&void 0!==a.dataset&&void 0!==a.dataset.zutooltip}};ZUTOOLS.TooltipManager=function(){var a=this;this.timeout=void 0;this.timeoutFinished=!1;this.clickOpened=void 0;this.tooltip=new ZUTOOLS.Tooltip;this.finish=function(){a.timeoutFinished=!0;a.timeout=void 0;a.showTooltip(!1)}};
ZUTOOLS.TooltipManager.prototype={constructor:ZUTOOLS.TooltipManager,toolclick:function(){this.clickOpened&&this.hideTooltip()},toolclickopen:function(a,b,c,d){this.clickOpened===a?this.hideTooltip():(this.clickOpened=a,this.cancelTimeout(),this.timeoutFinished=!1,this.getTooltipContent=b,this.getMetrics=c,this.hasInputs=d,this.showTooltip(!0))},toolover:function(a,b,c){!this.clickOpened&&void 0===this.timeout&&(this.getTooltipContent=a,this.getMetrics=b,this.hasInputs=c,this.timeoutFinished=!1,this.timeout=
setTimeout(this.finish,500))},toolout:function(a){this.timeoutFinished?(!this.hasInputs()||!this.tooltip.isPartOfTooltip(a.relatedTarget))&&this.hideTooltip():this.cancelTimeout()},showTooltip:function(a){this.tooltip.setContent(this.getTooltipContent());this.tooltip.setMetrics(this.getMetrics());this.tooltip.wasClicked=a;this.tooltip.show()},hideTooltip:function(){this.clickOpened=void 0;this.tooltip.hide()},cancelTimeout:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)},
blockHiding:function(a){this.tooltip.hidingBlocked=a}};ZUTOOLS.Slider=function(a){function b(a,b){function d(a){a.preventDefault();a.stopPropagation()}function j(a){a=Math.round((a.clientX-p)*(c.max-c.min)/c.width);c.setValue(b,q+a)}function h(){document.removeEventListener("selectstart",d,!1);document.removeEventListener("mousemove",j,!1);document.removeEventListener("mouseup",h,!1);SIMULATION.gui.tooltip.blockHiding(!1)}if(c.active){if(void 0===b){var b=0,l=void 0,m=c.values.length;if(1===m)var i=(a.offsetX||a.layerX)-15,l=Math.round(i*(c.max-c.min)/
c.width)+c.min;else for(var n=Infinity,k=0;k<m;k++){var i=(a.offsetX||a.layerX)-(30*k/(m-1)+15),i=Math.round(i*(c.max-c.min)/c.width)+c.min,o=Math.abs(c.values[k]-i);if(o<n||o===n&&c.values[k]<i)n=o,b=k,l=i}c.setValue(b,l)}var p=a.clientX,q=c.values[b];a.preventDefault();a.stopPropagation();SIMULATION.gui.tooltip.blockHiding(!0);document.addEventListener("selectstart",d,!1);document.addEventListener("mousemove",j,!1);document.addEventListener("mouseup",h,!1)}}var c=this;this.min=a.min;this.max=a.max;
this.values=a.values;this.active=void 0!==a.active?a.active:!0;this.onChange=a.onChange;this.width=1<this.values.length?270:300;this.domNode=document.createElement("div");this.domNode.setAttribute("class","slider");this.domNode.addEventListener("mousedown",b,!1);this.sliderbar=document.createElement("div");this.sliderbar.setAttribute("class","sliderbar corners small");this.domNode.appendChild(this.sliderbar);this.range=document.createElement("div");this.domNode.appendChild(this.range);this.handles=
[];for(var d=0;d<this.values.length;d++)this.handles[d]=document.createElement("div"),this.domNode.appendChild(this.handles[d]),function(){var a=d;c.handles[d].addEventListener("mousedown",function(c){b(c,a)},!1)}();this.setActivation(this.active);this.updateSlider()};
ZUTOOLS.Slider.prototype={constructor:ZUTOOLS.Slider,setValue:function(a,b){var c=void 0!==this.values[a+1]?this.values[a+1]:this.max,b=Math.min(Math.max(b,void 0!==this.values[a-1]?this.values[a-1]:this.min),c);b!==this.values[a]&&(this.values[a]=b,this.onChange(this.values),this.updateSlider())},updateSlider:function(){var a=this.values.length;if(1===a)a=(this.values[0]-this.min)*this.width/(this.max-this.min),this.handles[0].style.left=a+"px",this.range.style.width=a+9+"px";else{for(var b=[],c=
0;c<a;c++)b[c]=(this.values[c]-this.min)*this.width/(this.max-this.min)+30*c/(a-1),this.handles[c].style.left=b[c]+"px";this.range.style.left=b[0]+15+"px";this.range.style.width=b[a-1]-b[0]+"px"}},setActivation:function(a){this.active=a;this.range.setAttribute("class","range corners small"+(a?"":" deactivated"));for(var a="handle action corners small"+(a?" pointer":" deactivated"),b=0;b<this.handles.length;b++)this.handles[b].setAttribute("class",a)}};ZUTOOLS.Button=function(a){var b=this;this.onclick=a.onclick;this.domNode=document.createElement("div");this.domNode.setAttribute("class","button action corners small");this.domNode.innerHTML=a.text;this.domNode.addEventListener("click",function(){b.onclick()},!1)};ZUTOOLS.Button.prototype={constructor:ZUTOOLS.Button,select:function(a){this.domNode.setAttribute("class","button action corners small"+(void 0===a||a?" selected":""))}};ZUTOOLS.Selection=function(a,b){var c=this;this.selected=a.selected;this.onchange=a.onchange;this.onselect=b;this.domNode=document.createElement("div");this.buttons={};for(var d in a.options)(function(){var b=d,g=new ZUTOOLS.Button({text:a.options[d],onclick:function(){c._onselect(b)}});c.buttons[b]=g;c.domNode.appendChild(g.domNode);d===c.selected&&g.select()})()};
ZUTOOLS.Selection.prototype={constructor:ZUTOOLS.Selection,deselectAll:function(){for(var a in this.buttons)this.buttons[a].select(!1)},_onselect:function(a){this.onselect();a!==this.selected&&(this.selected=a,this.deselectAll(),this.buttons[a].select(),this.onchange(a))}};ZUTOOLS.Utils={XML:"http://www.w3.org/XML/1998/namespace",SVG:"http://www.w3.org/2000/svg",XLink:"http://www.w3.org/1999/xlink",loadXML:function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.setRequestHeader("Content-Type","text/xml");b.send("");return b.responseXML},loadJSON:function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.setRequestHeader("Content-Type","application/json");b.send("");return JSON&&JSON.parse(b.responseText)}};
