<!doctype html>
<html>
<head>
	<title>Zuse Z1 Simulations</title>
	<link rel="shortcut icon" href="favicon.ico" />
	<meta charset="utf-8">

	<script src="lib/three.js"></script>

	<script src="js/main.js"></script>

	<script id="vertexShader" type="x-shader/x-vertex">
		uniform vec3 color;
		uniform vec3 clippingLow;
		uniform vec3 clippingHigh;

		varying vec3 pixelCoordinates;
		varying vec3 pixelNormal;

		void main() {

			pixelCoordinates = position;
			pixelNormal = normal;
			vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
			gl_Position = projectionMatrix * mvPosition;

		}
	</script>

	<script id="fragmentShader" type="x-shader/x-fragment">
		uniform vec3 color;
		uniform vec3 clippingLow;
		uniform vec3 clippingHigh;

		varying vec3 pixelCoordinates;
		varying vec3 pixelNormal;

		void main( void ) {

			float shade = (
				  3.0 * pow ( abs ( pixelNormal.y ), 2.0 )
				+ 2.0 * pow ( abs ( pixelNormal.z ), 2.0 )
				+ 1.0 * pow ( abs ( pixelNormal.x ), 2.0 )
			) / 3.0;

			if (
				   pixelCoordinates.x >= clippingLow.x
				&& pixelCoordinates.x <= clippingHigh.x
				&& pixelCoordinates.y >= clippingLow.y
				&& pixelCoordinates.y <= clippingHigh.y
				&& pixelCoordinates.z >= clippingLow.z
				&& pixelCoordinates.z <= clippingHigh.z
			) {

				gl_FragColor = vec4( color * shade, 1.0 );

			} else {

				discard;

			}

		}
	</script>

</head>
<body>

<script> new ZUSE.Simulation(); </script>

</body>
</html>

